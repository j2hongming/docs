
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Ansys/">
      
      
        <link rel="next" href="../Deployment/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Computer Networking - j2hongming Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#computer-networking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="j2hongming Docs" class="md-header__button md-logo" aria-label="j2hongming Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            j2hongming Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Computer Networking
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="j2hongming Docs" class="md-nav__button md-logo" aria-label="j2hongming Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    j2hongming Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome the docs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hackmd
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Hackmd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AWS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ansible%20Practice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansible Practice
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ansible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ansys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Computer Networking
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Computer Networking
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      概觀
    </span>
  </a>
  
    <nav class="md-nav" aria-label="概觀">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      基本元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      元素要如何溝通?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      類比
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      連線網路
    </span>
  </a>
  
    <nav class="md-nav" aria-label="連線網路">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      連線類型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="連線類型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      家用連線
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      公司連線
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      無線連線
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      國際化域名
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bgp" class="md-nav__link">
    <span class="md-ellipsis">
      BGP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nat" class="md-nav__link">
    <span class="md-ellipsis">
      NAT
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NAT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-nat" class="md-nav__link">
    <span class="md-ellipsis">
      dynamic NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-nat" class="md-nav__link">
    <span class="md-ellipsis">
      static NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port-address-translation-pat" class="md-nav__link">
    <span class="md-ellipsis">
      Port Address Translation (PAT)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      Port forwarding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      Under the hood
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vlan" class="md-nav__link">
    <span class="md-ellipsis">
      VLAN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#route" class="md-nav__link">
    <span class="md-ellipsis">
      Route
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Route">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-learn-about-ip-routing-and-how-packets-move-through-a-linux-system" class="md-nav__link">
    <span class="md-ellipsis">
      1. Learn About IP Routing and How Packets Move Through a Linux System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-ip-routing" class="md-nav__link">
    <span class="md-ellipsis">
      What is IP Routing?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is IP Routing?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-packets-move-through-a-linux-system" class="md-nav__link">
    <span class="md-ellipsis">
      How Packets Move Through a Linux System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-decision-example" class="md-nav__link">
    <span class="md-ellipsis">
      Routing Decision Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-understand-routing-table-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      2. Understand Routing Table Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Understand Routing Table Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-default-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      a) Default Gateway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-static-routes" class="md-nav__link">
    <span class="md-ellipsis">
      b) Static Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-dynamic-routes" class="md-nav__link">
    <span class="md-ellipsis">
      c) Dynamic Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-routing-policies-policy-based-routing" class="md-nav__link">
    <span class="md-ellipsis">
      d) Routing Policies (Policy-Based Routing)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpn" class="md-nav__link">
    <span class="md-ellipsis">
      VPN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arp" class="md-nav__link">
    <span class="md-ellipsis">
      ARP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      DNS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dnssec" class="md-nav__link">
    <span class="md-ellipsis">
      DNSSEC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind" class="md-nav__link">
    <span class="md-ellipsis">
      bind
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verify" class="md-nav__link">
    <span class="md-ellipsis">
      Verify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rndc" class="md-nav__link">
    <span class="md-ellipsis">
      rndc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nsupdate" class="md-nav__link">
    <span class="md-ellipsis">
      nsupdate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coredns" class="md-nav__link">
    <span class="md-ellipsis">
      CoreDNS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      DHCP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DHCP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detect-dhcp-server-in-the-subnet" class="md-nav__link">
    <span class="md-ellipsis">
      detect dhcp server in the subnet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-linux-as-a-router" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Linux as a Router
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubshooting-for-connection-problems" class="md-nav__link">
    <span class="md-ellipsis">
      Troubshooting for connection problems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubshooting for connection problems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#no-carrier" class="md-nav__link">
    <span class="md-ellipsis">
      NO-CARRIER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linkdown-from-ip-route" class="md-nav__link">
    <span class="md-ellipsis">
      linkdown from ip route
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cisco-nexus-9000-series" class="md-nav__link">
    <span class="md-ellipsis">
      Cisco Nexus 9000 Series
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Proxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#squid-system-proxy-config" class="md-nav__link">
    <span class="md-ellipsis">
      Squid + System Proxy config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Squid + System Proxy config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apt" class="md-nav__link">
    <span class="md-ellipsis">
      apt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-tunnelsocks-proxy-broser-proxy-config" class="md-nav__link">
    <span class="md-ellipsis">
      SSH Tunnel(SOCKS Proxy) + Broser Proxy config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH Tunnel(SOCKS Proxy) + Broser Proxy config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows-chrome" class="md-nav__link">
    <span class="md-ellipsis">
      windows chrome
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows-edge" class="md-nav__link">
    <span class="md-ellipsis">
      windows edge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows-firefox" class="md-nav__link">
    <span class="md-ellipsis">
      windows firefox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apt_1" class="md-nav__link">
    <span class="md-ellipsis">
      apt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mtu" class="md-nav__link">
    <span class="md-ellipsis">
      MTU
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localhost-and-127001" class="md-nav__link">
    <span class="md-ellipsis">
      localhost and 127.0.0.1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#can-a-single-network-card-have-2-ip-addresses" class="md-nav__link">
    <span class="md-ellipsis">
      Can a single network card have 2 IP addresses
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#firewall" class="md-nav__link">
    <span class="md-ellipsis">
      Firewall
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pxe" class="md-nav__link">
    <span class="md-ellipsis">
      PXE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-name" class="md-nav__link">
    <span class="md-ellipsis">
      Interface name
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tftp" class="md-nav__link">
    <span class="md-ellipsis">
      TFTP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TFTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-tftp" class="md-nav__link">
    <span class="md-ellipsis">
      Test TFTP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipxe" class="md-nav__link">
    <span class="md-ellipsis">
      iPXE
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iPXE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Ubuntu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ubuntu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs-boot" class="md-nav__link">
    <span class="md-ellipsis">
      nfs boot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-autoinstall-provision" class="md-nav__link">
    <span class="md-ellipsis">
      http autoinstall provision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redhat" class="md-nav__link">
    <span class="md-ellipsis">
      Redhat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redhat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-autoinstall-provision_1" class="md-nav__link">
    <span class="md-ellipsis">
      http autoinstall provision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipxe-menu" class="md-nav__link">
    <span class="md-ellipsis">
      ipxe menu
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloudflare-tunnel" class="md-nav__link">
    <span class="md-ellipsis">
      Cloudflare Tunnel
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DynamoDB%20Deep%20Dive%20Advence%20Design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DynamoDB Deep Dive Advence Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GPU/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPU
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GRUB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GRUB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Google%20docs%20api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google docs api
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTTP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HYCOM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HYCOM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../InfiniBand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InfiniBand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../KVM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KVM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LDAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LLM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux%E6%8A%80%E5%B7%A7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux%E8%A7%80%E5%BF%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux觀念
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Makefile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Makefile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Message%20Passing%20Interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message Passing Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Nagios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nagios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Nexus%20Repository%20Manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nexus Repository Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenShift/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenShift
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Openstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openstack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RedHat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RedHat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Redfish/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redfish
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SEO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SEO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SQL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SSL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SUSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SUSE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SVN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SVN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Scrum%E7%AD%86%E8%A8%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scrum筆記
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Singularity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Singularity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Slurm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UI%20Framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UI Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ubuntu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ubuntu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Web%20Server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bitwise%20world/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bitwise world
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cloud-init/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cloud-init
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ffmpeg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ffmpeg
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../influxdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Influxdb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pacemaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pacemaker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../podman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    podman
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    prometheus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python%20web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    python web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell%20script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    shell script
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xcat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    xcat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E4%BD%BF%E7%94%A8%E8%80%85%E9%AB%94%E9%A9%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用者體驗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%82%99%E4%BB%BD%E9%82%84%E5%8E%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    備份還原
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6%E7%9A%84%E8%97%9D%E8%A1%93/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    單元測試的藝術
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    奇技淫巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%8C%81%E7%BA%8C%E6%95%B4%E5%90%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    持續整合
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%8E%92%E5%88%97%E7%B5%84%E5%90%88%E8%88%87%E6%A9%9F%E7%8E%87/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    排列組合與機率
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%88%E8%83%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    效能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    機器學習
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    正規表示法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%B8%AC%E8%A9%A6%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    測試工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%84%A1%E7%B7%9A%E7%B6%B2%E8%B7%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    無線網路
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E5%AF%A6%E5%8B%99/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    物件導向實務
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E7%B3%BB%E7%B5%B1%E5%88%86%E6%9E%90%E8%88%87%E8%A8%AD%E8%A8%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    物件導向系統分析與設計
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%A1%AC%E9%AB%94%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    硬體概念
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%A8%8B%E5%BC%8F%E6%9C%AC%E8%B3%AA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    程式本質
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%B3%BB%E7%B5%B1%E7%9A%84%E5%83%B9%E5%80%BC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    系統的價值
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%B5%B1%E8%A8%88%E5%9C%96%E8%A1%A8%E7%9A%84%E8%A1%A8%E9%81%94%E6%96%B9%E5%BC%8F%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%E7%9A%84%E7%AF%84%E5%9C%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    統計圖表的表達方式以及使用的範圍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%99%9B%E6%93%AC%E6%A9%9F%E5%99%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虛擬機器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%B3%87%E6%96%99%E5%BA%AB%E7%B6%AD%E9%81%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    資料庫維運
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%B3%87%E6%96%99%E6%A8%A1%E5%9E%8B%28Data%20Modeling%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    資料模型(Data Modeling)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    資訊安全
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BB%9F%E9%AB%94%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E5%B0%88%E6%A5%AD%E5%92%8C%E9%80%9A%E8%AD%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    軟體工程師的專業和通識
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BB%9F%E9%AB%94%E9%9C%80%E6%B1%82%E6%BA%9D%E9%80%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    軟體需求溝通
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      概觀
    </span>
  </a>
  
    <nav class="md-nav" aria-label="概觀">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      基本元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      元素要如何溝通?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      類比
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      連線網路
    </span>
  </a>
  
    <nav class="md-nav" aria-label="連線網路">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      連線類型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="連線類型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      家用連線
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      公司連線
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      無線連線
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      國際化域名
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bgp" class="md-nav__link">
    <span class="md-ellipsis">
      BGP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nat" class="md-nav__link">
    <span class="md-ellipsis">
      NAT
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NAT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-nat" class="md-nav__link">
    <span class="md-ellipsis">
      dynamic NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-nat" class="md-nav__link">
    <span class="md-ellipsis">
      static NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port-address-translation-pat" class="md-nav__link">
    <span class="md-ellipsis">
      Port Address Translation (PAT)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      Port forwarding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      Under the hood
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vlan" class="md-nav__link">
    <span class="md-ellipsis">
      VLAN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#route" class="md-nav__link">
    <span class="md-ellipsis">
      Route
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Route">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-learn-about-ip-routing-and-how-packets-move-through-a-linux-system" class="md-nav__link">
    <span class="md-ellipsis">
      1. Learn About IP Routing and How Packets Move Through a Linux System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-ip-routing" class="md-nav__link">
    <span class="md-ellipsis">
      What is IP Routing?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is IP Routing?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-packets-move-through-a-linux-system" class="md-nav__link">
    <span class="md-ellipsis">
      How Packets Move Through a Linux System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-decision-example" class="md-nav__link">
    <span class="md-ellipsis">
      Routing Decision Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-understand-routing-table-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      2. Understand Routing Table Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Understand Routing Table Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-default-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      a) Default Gateway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-static-routes" class="md-nav__link">
    <span class="md-ellipsis">
      b) Static Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-dynamic-routes" class="md-nav__link">
    <span class="md-ellipsis">
      c) Dynamic Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-routing-policies-policy-based-routing" class="md-nav__link">
    <span class="md-ellipsis">
      d) Routing Policies (Policy-Based Routing)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpn" class="md-nav__link">
    <span class="md-ellipsis">
      VPN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arp" class="md-nav__link">
    <span class="md-ellipsis">
      ARP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      DNS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dnssec" class="md-nav__link">
    <span class="md-ellipsis">
      DNSSEC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind" class="md-nav__link">
    <span class="md-ellipsis">
      bind
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verify" class="md-nav__link">
    <span class="md-ellipsis">
      Verify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rndc" class="md-nav__link">
    <span class="md-ellipsis">
      rndc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nsupdate" class="md-nav__link">
    <span class="md-ellipsis">
      nsupdate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coredns" class="md-nav__link">
    <span class="md-ellipsis">
      CoreDNS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      DHCP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DHCP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detect-dhcp-server-in-the-subnet" class="md-nav__link">
    <span class="md-ellipsis">
      detect dhcp server in the subnet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-linux-as-a-router" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Linux as a Router
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubshooting-for-connection-problems" class="md-nav__link">
    <span class="md-ellipsis">
      Troubshooting for connection problems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubshooting for connection problems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#no-carrier" class="md-nav__link">
    <span class="md-ellipsis">
      NO-CARRIER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linkdown-from-ip-route" class="md-nav__link">
    <span class="md-ellipsis">
      linkdown from ip route
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cisco-nexus-9000-series" class="md-nav__link">
    <span class="md-ellipsis">
      Cisco Nexus 9000 Series
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Proxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#squid-system-proxy-config" class="md-nav__link">
    <span class="md-ellipsis">
      Squid + System Proxy config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Squid + System Proxy config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apt" class="md-nav__link">
    <span class="md-ellipsis">
      apt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-tunnelsocks-proxy-broser-proxy-config" class="md-nav__link">
    <span class="md-ellipsis">
      SSH Tunnel(SOCKS Proxy) + Broser Proxy config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH Tunnel(SOCKS Proxy) + Broser Proxy config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows-chrome" class="md-nav__link">
    <span class="md-ellipsis">
      windows chrome
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows-edge" class="md-nav__link">
    <span class="md-ellipsis">
      windows edge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows-firefox" class="md-nav__link">
    <span class="md-ellipsis">
      windows firefox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apt_1" class="md-nav__link">
    <span class="md-ellipsis">
      apt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mtu" class="md-nav__link">
    <span class="md-ellipsis">
      MTU
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localhost-and-127001" class="md-nav__link">
    <span class="md-ellipsis">
      localhost and 127.0.0.1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#can-a-single-network-card-have-2-ip-addresses" class="md-nav__link">
    <span class="md-ellipsis">
      Can a single network card have 2 IP addresses
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#firewall" class="md-nav__link">
    <span class="md-ellipsis">
      Firewall
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pxe" class="md-nav__link">
    <span class="md-ellipsis">
      PXE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-name" class="md-nav__link">
    <span class="md-ellipsis">
      Interface name
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tftp" class="md-nav__link">
    <span class="md-ellipsis">
      TFTP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TFTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-tftp" class="md-nav__link">
    <span class="md-ellipsis">
      Test TFTP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipxe" class="md-nav__link">
    <span class="md-ellipsis">
      iPXE
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iPXE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Ubuntu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ubuntu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs-boot" class="md-nav__link">
    <span class="md-ellipsis">
      nfs boot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-autoinstall-provision" class="md-nav__link">
    <span class="md-ellipsis">
      http autoinstall provision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redhat" class="md-nav__link">
    <span class="md-ellipsis">
      Redhat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redhat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-autoinstall-provision_1" class="md-nav__link">
    <span class="md-ellipsis">
      http autoinstall provision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipxe-menu" class="md-nav__link">
    <span class="md-ellipsis">
      ipxe menu
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloudflare-tunnel" class="md-nav__link">
    <span class="md-ellipsis">
      Cloudflare Tunnel
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="computer-networking">Computer Networking</h1>
<ul>
<li><a href="https://www.udemy.com/course/tcpipipv6/?referralCode=6C8F3C4D4EBB95130B02">雲端時代必備網路紮根概念（含TCP/IP與IPV6） | Udemy</a></li>
<li><a href="https://iximiuz.com/en/posts/computer-networking-101/">Computer Networking Introduction - Ethernet and IP (Heavily Illustrated)</a></li>
<li><a href="https://dic.vbird.tw/linux_server/unit09.php">第 9 堂課 - 領域名稱伺服器 (DNS)</a><ul>
<li><a href="https://www.ibm.com/support/pages/faq4-hostnames-short-or-long">FAQ4: Hostnames short or long?</a></li>
<li><a href="https://serverfault.com/questions/269838/what-is-the-difference-between-a-hostname-and-a-fully-qualified-domain-name">What is the difference between a hostname and a fully qualified domain name? - Server Fault</a></li>
<li><a href="https://unix.stackexchange.com/questions/149966/what-is-the-difference-between-hostname-hostname-fqdn-and-hostname-a">networking - What is the difference between hostname, hostname --fqdn, and hostname -A - Unix &amp; Linux Stack Exchange</a></li>
<li><a href="https://serverfault.com/questions/331936/setting-the-hostname-fqdn-or-short-name">linux - Setting the hostname: FQDN or short name? - Server Fault</a></li>
</ul>
</li>
<li><a href="https://www.kawabangga.com/posts/5301">四层负载均衡漫谈 | 卡瓦邦噶！</a></li>
<li><a href="https://support.nordvpn.com/Connectivity/Linux/1047409212/How-to-disable-IPv6-on-Linux.htm">How to disable IPv6 on Linux? | NordVPN support</a></li>
<li><a href="https://newtoypia.blogspot.com/2020/09/netplan.html">玩具烏托邦: (幾乎不談指令) 概念性的 netplan 簡介</a><ul>
<li><a href="https://ubuntu.com/server/docs/network-configuration">Configuring networks | Ubuntu</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10267179">[機派X] Day 6 - Linux 沒網路，我要怎麼發鐵人賽的文章</a></li>
</ul>
</li>
<li><a href="https://www.redhat.com/sysadmin/sysadmin-essentials-networking-basics">Learn the networking basics every sysadmin needs to know | Enable Sysadmin</a><ul>
<li><a href="https://opensource.com/downloads/cheat-sheet-networking?intcmp=701f20000012ngPAAQ">Cheat sheet: Linux networking | Opensource.com</a></li>
</ul>
</li>
<li><a href="https://www.kawabangga.com/posts/6295">理解网络的分层模型 | 卡瓦邦噶！</a></li>
<li><a href="https://showipprotocols-tw.blogspot.com/2016/08/spine-leaf.html">Cisco學習資訊分享: 聊一聊Spine/Leaf是什麼</a></li>
<li><a href="https://arthurchiao.art/blog/spine-leaf-design-zh/">[译] 数据中心网络：Spine-Leaf 架构设计综述（2016）</a></li>
<li>bridge<ul>
<li><a href="https://linux.vbird.org/linux_server/rocky9/0170hostnetwork.php">鳥哥私房菜 - 第六章、區域網路整體環境規劃</a></li>
<li><a href="https://joehuang-pop.github.io/2020/04/26/Linux-%E5%85%A7%E6%A0%B8%E8%99%9B%E6%93%ACBridge-veth%E5%8E%9F%E7%90%86%E8%88%87%E5%AF%A6%E4%BD%9C-Hands-on-Linux-Kernel-bridge-veth/">[Linux] 內核虛擬Bridge, veth原理與實作 | Hands on Linux Kernel: bridge, veth | 黃大仙的雲端修行室</a></li>
<li><a href="https://benjr.tw/20497">Linux – Bridge – Benjr.tw</a></li>
<li><a href="https://kerwen374.medium.com/proxmox-ve-%E5%88%A9%E7%94%A8-linux-bridge-isc-dhcp-server-%E5%BF%AB%E9%80%9F%E8%A8%AD%E5%AE%9A%E8%99%9B%E6%93%AC%E6%A9%9F%E5%85%A7%E7%B6%B2-caff62bb99df">Proxmox VE 利用 Linux Bridge + isc -dhcp-server 快速設定虛擬機內網 | by Kerwin Tsai | Medium</a></li>
</ul>
</li>
<li><a href="https://docs.google.com/presentation/d/1LcTx8_HkAoBLX0mwCpJO7UtMk5UVqTjc1oBBfvwLld8/edit#slide=id.g4dfce81f19_0_45">2024-COSCUP-多客機上的 NAT 管理系統專案經驗分享 - Google 簡報</a></li>
<li><a href="https://www.kawabangga.com/posts/6417">数据中心网络高可用技术：序 | 卡瓦邦噶！</a><ul>
<li><a href="https://www.kawabangga.com/posts/6537">数据中心网络高可用技术之从交换机到交换机：MLAG, 堆叠技术 | 卡瓦邦噶！</a></li>
<li><a href="https://www.kawabangga.com/posts/6594">数据中心网络高可用技术之从服务器到网关：首跳冗余协议 VRRP | 卡瓦邦噶！</a></li>
<li><a href="https://www.kawabangga.com/posts/6624">Google 的十年五代网络架构 | 卡瓦邦噶！</a></li>
</ul>
</li>
<li>內網穿透<ul>
<li><a href="https://ivonblog.com/posts/setup-zerotier/">ZeroTier使用教學：建立虛擬區網的VPN軟體 · Ivon的部落格</a><ul>
<li><a href="https://ivonblog.com/categories/self-hosting%E8%87%AA%E6%9E%B6/">Self-hosting自架 · Ivon的部落格</a></li>
</ul>
</li>
<li><a href="https://ivonblog.com/posts/setup-tailscale/">Tailscale設定教學，免費內網穿透VPN · Ivon的部落格</a><ul>
<li><a href="https://ivonblog.com/posts/tailscale-setup-exit-nodes/">將Tailscale當跨區VPN用：如何設定出口節點(Exit Node) · Ivon的部落格</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="_1">概觀</h2>
<p>提供服務給應用程式的基礎架構</p>
<h3 id="_2">基本元素</h3>
<p>從邊際到核心</p>
<p>==終端系統==(end system)</p>
<p>另一個名稱為主機(host)
桌電, 筆電, 手上的智慧型手機</p>
<p><img alt="" src="https://cdn.pixabay.com/photo/2017/03/05/12/26/digitization-2118531_960_720.jpg" /></p>
<p>==通訊連結==(communication links)</p>
<p>終端系統通往網路核心的實體物理媒介
例如: 同軸電纜, 銅線, 光纖和無線電頻譜</p>
<p><img alt="" src="https://cdn.pixabay.com/photo/2016/04/02/03/07/ethernet-1302083_960_720.jpg" /></p>
<p>==封包交換器==(packet switches)</p>
<p>引路者, 知道封包從何而來並指引封包該前往何處
封包(packet)是電腦網路中的資訊封裝單位
主要有路由器(router), 鏈結層交換器(link-layer switch)</p>
<p><img alt="" src="https://cdn.pixabay.com/photo/2016/11/18/22/31/architecture-1837176_960_720.jpg" /></p>
<h3 id="_3">元素要如何溝通?</h3>
<p>==協定==
協定定義了兩個以上的通訊實體之間
1. 交換訊息的格式和順序
2. 傳送接收訊息或發生其他事件時所要採取的動作</p>
<p>類別?屬性和操作</p>
<h3 id="_4">類比</h3>
<p>車輛運輸網路，由高速公路、一般道路和交流道組成。車輛類似封包，高速公路、一般道路類似通訊連結，交流道類似封包交換器，建築物類似終端系統。</p>
<h2 id="_5">連線網路</h2>
<p>將終端系統連結到邊際路由器(edge router)的連線方式
邊際路由器: end-to-end路徑上的第一個路由器</p>
<h3 id="_6">連線類型</h3>
<h4 id="_7">家用連線</h4>
<p>==撥接數據機==(dial-up modem)
透過一般的類比電話線連線到家用ISP
類比電話線為雙絞同心線</p>
<p>==DSL數位用戶專線==(digital subscriber line)
通常由電話公司提供, 也是在既存的雙絞電話線上運作
透過頻率分割的多工處理技術, 可同時接聽撥打電話和使用網際網路</p>
<p>上傳和下載至ISP路由器的速率是不對稱的, 下載 &gt; 上傳</p>
<p>==HFC混合光纖同軸電纜==(hybrid fiber coaxial cable)
脫胎自目前播送有線電視所使用的電纜網路
使用纜線數據機(cable modem), 是一種共用的播送媒介</p>
<table>
<thead>
<tr>
<th></th>
<th>撥接數據機</th>
<th>DSL</th>
<th>HFC</th>
</tr>
</thead>
<tbody>
<tr>
<td>實體線路</td>
<td>類比電話線</td>
<td>類比電話線</td>
<td>同軸電纜</td>
</tr>
<tr>
<td>同時接聽撥打電話和使用網際網路</td>
<td>X</td>
<td>V</td>
<td>V</td>
</tr>
</tbody>
</table>
<h4 id="_8">公司連線</h4>
<p>==區域網路(Local area network)==
有多種區域網路的技術, 常用的是乙太網路技術, 乙太網路可分為共用式和交換式</p>
<h4 id="_9">無線連線</h4>
<p>==無線區域網路==(wireless LAN)
可從半徑數十公尺內的基地台(無線存取連接點)傳輸和接收封包</p>
<p>==廣域無線連線網路==(wide-area wireless access networks)
提供使用者在基地台方圓數十公里內的無線網路連線</p>
<h2 id="_10">國際化域名</h2>
<ul>
<li>https://xn--fiq228c.xn--kpry57d/domain_name01.html</li>
<li>https://xn--fiq228c.xn--kpry57d/technology/punycode.htm</li>
</ul>
<h2 id="bgp">BGP</h2>
<ul>
<li><a href="https://blog.darkthread.net/blog/bgp-anycast/">Internet 跟你想的不一樣：IP 地址不是唯一，有許多相同 IP 的主機散落各地-黑暗執行緒</a></li>
</ul>
<h2 id="nat">NAT</h2>
<ul>
<li><a href="https://medium.com/networks-security/nat-snat-dnat-pat-port-forwarding-b7982fab02cd">NAT — SNAT, DNAT, PAT &amp; Port Forwarding | by Geeky much! | Networks &amp; Security | Medium</a></li>
<li><a href="https://www.jannet.hk/network-address-translation-nat-zh-hant/">NAT 網路位址轉換 - Jan Ho 的網絡世界</a></li>
<li><a href="https://adil.medium.com/how-do-snat-and-dnat-work-on-linux-4203bc756ffb">How do SNAT and DNAT work on Linux? | by adil | Medium</a></li>
</ul>
<p>方向性
使用port</p>
<p>DNAT vs PAT
DNAT: pool of available public IP addresses
PAT: a single public IP address and multiplexes incoming and outgoing network traffic using port numbers.</p>
<h3 id="dynamic-nat">dynamic NAT</h3>
<p><strong>dynamic NAT</strong> is a good choice when you need to allow outgoing connections from a network that has a limited number of public IP addresses.</p>
<h3 id="static-nat">static NAT</h3>
<p>with <strong>static NAT</strong>, the NAT device uses a fixed one-to-one mapping between private and public IP addresses.</p>
<h3 id="port-address-translation-pat">Port Address Translation (PAT)</h3>
<p><strong>Port Address Translation (PAT)</strong> is a type of Network Address Translation (NAT) that is used to map multiple private IP addresses to a single public IP address. It is also known as Network Address Port Translation (NAPT) or IP masquerading.</p>
<ul>
<li>PAT works by using a single public IP address and multiplexing incoming and outgoing network traffic using port numbers.</li>
<li>It allows multiple devices on the private network to share a single public IP address and access the internet simultaneously.</li>
</ul>
<h3 id="port-forwarding">Port forwarding</h3>
<p><strong>Port forwarding</strong> is a networking technique that is used to allow incoming internet connections to reach a specific device on a private network.</p>
<ul>
<li>This allows external devices to connect to the device on the private network using its public IP address and the forwarded port number.</li>
</ul>
<h2 id="under-the-hood">Under the hood</h2>
<p><a href="https://plantegg.github.io/2019/05/15/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E7%BD%91%E7%BB%9C--%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%8C%85%E7%9A%84%E6%97%85%E7%A8%8B/">就是要你懂网络--一个网络包的旅程 | plantegg</a>
os先根據<strong>目標IP</strong>和<strong>本機的route規則</strong>計算使用哪個interface(nic)
input: target ip, route rule
output: interface</p>
<p>if same subnet, arp protocol(arp cache)</p>
<p>if different subnet, ask the gateway, and gateway use its route rule and arp cache</p>
<p><a href="https://learningnetwork.cisco.com/s/question/0D53i00000Kt4I0CAJ/one-interface-can-support-multiple-ip-address">one interface can support multiple ip address</a></p>
<h2 id="vlan">VLAN</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=5jijK2YTFnw">(83) 【網絡基礎】 VLAN 基礎概念 教學 (中文字幕) (可調節速度) - YouTube</a></li>
<li><a href="http://www.tsnien.idv.tw/Manager_WebBook/chap8/8-1%20%E8%99%9B%E6%93%AC%E5%8D%80%E5%9F%9F%E7%B6%B2%E8%B7%AF%E7%B0%A1%E4%BB%8B.html">VLAN虛擬區域網路簡介</a></li>
<li><a href="https://www.youtube.com/watch?v=5vj4CKAyz6E">(83) 網路基礎27 - Switch1:認識VLAN - YouTube</a></li>
</ul>
<p>Unmanaged Switch
managed Switch</p>
<p>Access port: 只有一個VLAN的port
Trunk port: 多個VLAN的port</p>
<p>Trunk link</p>
<h2 id="route">Route</h2>
<p>what meas about "ip route" result</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>default via 167.22.10.1 dev enp33s0f0 proto static metric 101
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>167.22.0.0/16 dev enp33s0f0 proto kernel scope link src 167.22.0.15 metric 101
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>167.122.0.0/16 dev ib0 proto kernel scope link src 167.122.0.15 metric 105
</span></code></pre></div>
<p>The output you provided is the result of running the "ip route" command, which displays the current routing table on a Linux system. Here is a breakdown of each line of the output:</p>
<blockquote>
<p>default via 167.22.10.1 dev enp33s0f0 proto static metric 101: This line represents the default route, which is used when a packet needs to be sent to a destination that is not covered by any other more specific route. In this case, the default gateway is 167.22.10.1, and the outgoing interface is enp33s0f0. The "proto" field indicates that this is a static route, which is configured manually rather than learned dynamically, and the "metric" field represents the cost of this route relative to other routes in the table.</p>
<p>167.22.0.0/16 dev enp33s0f0 proto kernel scope link src 167.22.0.15 metric 101: This line represents a directly connected network, meaning that the system is directly connected to a subnet with the specified address range. In this case, the network address is 167.22.0.0/16, the outgoing interface is enp33s0f0, and the "proto" field indicates that this is a kernel route, which is automatically generated by the system. The "scope" field indicates the visibility of the route, with "link" meaning that it is only visible within the local network segment. The "src" field specifies the source IP address to use when sending packets to this subnet, and the "metric" field represents the cost of this route relative to other routes in the table.</p>
<p>167.122.0.0/16 dev ib0 proto kernel scope link src 167.122.0.15 metric 105: This line is similar to the previous one, but it represents a different network that is connected to a different interface. Specifically, the network address is 167.122.0.0/16, the outgoing interface is ib0, and the "proto", "scope", "src", and "metric" fields have the same meanings as in the previous line.</p>
</blockquote>
<p>how to debug route if connection is break</p>
<blockquote>
<p>If you are experiencing a network connectivity issue and suspect that there might be a problem with your routing configuration, there are a few steps you can take to troubleshoot the issue. Here are some tips on how to debug your routing configuration:</p>
<p>Check the routing table: Use the "ip route" command to check the current routing table on your system. Verify that the routes in the table are correct and that there are no conflicting routes. Make sure that the default gateway is set correctly and that the routing table is up-to-date.</p>
<p>Ping the default gateway: Use the "ping" command to verify that you can reach the default gateway. If the ping fails, it could indicate a problem with the default gateway or the routing configuration.</p>
<p>Trace the route to the destination: Use the "traceroute" or "tracepath" command to trace the route to the destination. This will help you identify where the connection is being lost and whether there are any routing issues along the way.</p>
<p>Check the network topology: If you have access to the network topology, check it to make sure that there are no misconfigured devices or routing loops that could be causing the connectivity issue.</p>
<p>Check the firewall: Make sure that any firewalls or security policies are not blocking the traffic. Check the firewall logs to see if any traffic is being dropped or rejected.</p>
<p>Check the network interface: Verify that the network interface is up and running, and that it is configured correctly with the correct IP address, subnet mask, and gateway.</p>
</blockquote>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>ip<span class="w"> </span>r
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>ip<span class="w"> </span>route<span class="w"> </span>get<span class="w"> </span><span class="m">172</span>.19.51.6
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ip<span class="w"> </span>route<span class="w"> </span>del<span class="w"> </span><span class="m">172</span>.19.51.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">172</span>.19.41.1
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.2.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.2<span class="w"> </span>dev<span class="w"> </span>eth0
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>ip<span class="w"> </span>route<span class="w"> </span>del<span class="w"> </span><span class="m">192</span>.168.2.0/24
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># To make it permanent, add it to /etc/network/interfaces (Debian) or /etc/sysconfig/network-scripts/route-eth0 (RHEL).</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>sudo<span class="w"> </span>arp-scan<span class="w"> </span>-I<span class="w"> </span>eth15<span class="w"> </span><span class="m">172</span>.19.51.0/24
</span></code></pre></div>
<ol>
<li>Learn about IP routing and how packets move through a Linux system.</li>
<li>Understand routing table concepts, including:
    Default gateway
    Static routes
    Dynamic routes
    Routing policies
Sure! Let’s break these topics down step by step.</li>
</ol>
<p><a href="https://chatgpt.com/share/67da2713-e0c8-8009-b4a0-2327dca0b74e">Linux Routing Basic by chatgpt</a></p>
<hr />
<h3 id="1-learn-about-ip-routing-and-how-packets-move-through-a-linux-system"><strong>1. Learn About IP Routing and How Packets Move Through a Linux System</strong></h3>
<h3 id="what-is-ip-routing"><strong>What is IP Routing?</strong></h3>
<p>IP routing is the process of determining the path that packets take from a source to a destination across a network. In Linux, the kernel makes these decisions based on the system’s routing table.</p>
<h4 id="how-packets-move-through-a-linux-system"><strong>How Packets Move Through a Linux System</strong></h4>
<p>When a packet is sent from a Linux system, the following steps occur:</p>
<ol>
<li><strong>Packet Creation</strong>  </li>
<li>A user-space application (e.g., <code>ping</code>, <code>curl</code>, or a web browser) generates a packet.</li>
<li>
<p>The packet is passed to the transport layer (TCP/UDP) and then to the network layer (IP).</p>
</li>
<li>
<p><strong>Route Lookup</strong>  </p>
</li>
<li>The kernel checks the routing table to determine the appropriate <strong>next hop</strong>.</li>
<li>If a matching route is found, the packet is forwarded to the corresponding network interface.</li>
<li>
<p>If no route is found, the packet is dropped, and an error (e.g., "Network unreachable") is generated.</p>
</li>
<li>
<p><strong>Packet Forwarding (if applicable)</strong>  </p>
</li>
<li>If the system is configured as a router (<code>net.ipv4.ip_forward=1</code>), it forwards packets between interfaces.</li>
<li>
<p>The packet may be NAT-ed (if applicable) before being sent out.</p>
</li>
<li>
<p><strong>Packet Transmission</strong>  </p>
</li>
<li>
<p>The packet is encapsulated into an Ethernet frame and transmitted over the network.</p>
</li>
<li>
<p><strong>Reply Handling</strong>  </p>
</li>
<li>If a reply is received, it follows the same path in reverse.</li>
</ol>
<h4 id="routing-decision-example"><strong>Routing Decision Example</strong></h4>
<ul>
<li>Suppose a Linux machine with the IP <code>192.168.1.10/24</code> wants to send a packet to <code>8.8.8.8</code>:</li>
<li>The system checks the routing table.</li>
<li>If there is a default gateway (<code>192.168.1.1</code>), the packet is sent to it.</li>
<li>The gateway forwards it to the next router until it reaches <code>8.8.8.8</code>.</li>
</ul>
<p>You can inspect this process using:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ip<span class="w"> </span>route<span class="w"> </span>get<span class="w"> </span><span class="m">8</span>.8.8.8
</span></code></pre></div></p>
<hr />
<h3 id="2-understand-routing-table-concepts"><strong>2. Understand Routing Table Concepts</strong></h3>
<h4 id="a-default-gateway"><strong>a) Default Gateway</strong></h4>
<ul>
<li>The <strong>default gateway</strong> is the router that the system uses when no specific route is found for a destination.</li>
<li>It is defined as:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span>default<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span>dev<span class="w"> </span>eth0
</span></code></pre></div></li>
<li>To view the current default route:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ip<span class="w"> </span>route<span class="w"> </span>show<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>default
</span></code></pre></div></li>
<li>This tells the system, “If you don’t know where to send the packet, send it to 192.168.1.1.”</li>
</ul>
<h4 id="b-static-routes"><strong>b) Static Routes</strong></h4>
<ul>
<li><strong>Static routes</strong> are manually defined routes that do not change unless modified by the admin.</li>
<li>Used for networks that are not reachable via the default gateway.</li>
<li>Example: Add a route to <code>192.168.2.0/24</code> via <code>192.168.1.2</code>:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.2.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.2<span class="w"> </span>dev<span class="w"> </span>eth0
</span></code></pre></div></li>
<li>To delete a static route:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ip<span class="w"> </span>route<span class="w"> </span>del<span class="w"> </span><span class="m">192</span>.168.2.0/24
</span></code></pre></div></li>
<li>To make it permanent, add it to <code>/etc/network/interfaces</code> (Debian) or <code>/etc/sysconfig/network-scripts/route-eth0</code> (RHEL).</li>
</ul>
<h4 id="c-dynamic-routes"><strong>c) Dynamic Routes</strong></h4>
<ul>
<li><strong>Dynamic routing</strong> is managed by routing protocols like:</li>
<li><strong>OSPF (Open Shortest Path First)</strong></li>
<li><strong>BGP (Border Gateway Protocol)</strong></li>
<li><strong>RIP (Routing Information Protocol)</strong></li>
<li>Instead of static routes, dynamic routing updates routes automatically based on network conditions.</li>
<li>Dynamic routing is configured using software like:</li>
<li><strong>Quagga</strong></li>
<li><strong>FRRouting (FRR)</strong></li>
<li><strong>BIRD</strong></li>
<li>Example: Using FRRouting (for OSPF)
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>vtysh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;show ip route&#39;</span>
</span></code></pre></div></li>
</ul>
<h4 id="d-routing-policies-policy-based-routing"><strong>d) Routing Policies (Policy-Based Routing)</strong></h4>
<ul>
<li>Policy-Based Routing (PBR) allows packets to be routed based on criteria other than just the destination IP.</li>
<li>Example: If you want traffic from <code>192.168.1.100</code> to use a different gateway (<code>192.168.1.2</code>), you can do:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ip<span class="w"> </span>rule<span class="w"> </span>add<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.100<span class="w"> </span>table<span class="w"> </span><span class="m">100</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span>default<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.1.2<span class="w"> </span>table<span class="w"> </span><span class="m">100</span>
</span></code></pre></div></li>
<li>View existing rules:
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ip<span class="w"> </span>rule<span class="w"> </span>show
</span></code></pre></div></li>
<li>Example use cases:</li>
<li>Different ISPs for different traffic types.</li>
<li>Specific traffic (e.g., VoIP) using a dedicated gateway.</li>
</ul>
<hr />
<h3 id="conclusion"><strong>Conclusion</strong></h3>
<ul>
<li><strong>IP routing</strong> controls how packets move in a Linux system.</li>
<li><strong>Default gateway</strong> is the fallback route for unknown destinations.</li>
<li><strong>Static routes</strong> are manually set and do not change dynamically.</li>
<li><strong>Dynamic routes</strong> are automatically updated using routing protocols.</li>
<li><strong>Policy-based routing</strong> enables advanced traffic control.</li>
</ul>
<p>Would you like me to provide practical exercises or a lab setup for hands-on learning? 🚀</p>
<h2 id="vpn">VPN</h2>
<ul>
<li><a href="https://tailscale.com/kb/1017/install/">Tailscale quickstart · Tailscale</a></li>
<li><a href="https://tailscale.com/blog/how-tailscale-works/">How Tailscale works · Tailscale</a></li>
<li><a href="https://kafeiou.pw/2023/03/29/4858/">Tailscale+Headscale 自架VPN全紀錄 - 咖啡偶-IT日常</a></li>
<li><a href="https://blog.laisky.com/p/tailscale/">laisky-blog: 近期折腾 tailscale 的一些心得</a></li>
<li><a href="https://www.cloudflare.com/zh-tw/learning/network-layer/ipsec-vs-ssl-vpn/">IPsec VPN 與 SSL VPN | Cloudflare</a></li>
</ul>
<h2 id="arp">ARP</h2>
<ul>
<li><a href="https://ithelp.ithome.com.tw/articles/10246385">Day 14 連結層攻擊實作 - ARP Spoofing</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10302438">Day 16 : 實作篇 - 如何使用 ARP 欺騙（ARP Spoofing）進行中間人攻擊？ - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>
</ul>
<h2 id="dns">DNS</h2>
<ul>
<li><a href="https://linux.vbird.org/linux_server/rocky9/0210dns.php">鳥哥私房菜 - 第八章、領域名稱伺服器 DNS 服務</a><ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-bind-as-a-private-network-dns-server-on-ubuntu-18-04">How To Configure BIND as a Private Network DNS Server on Ubuntu 18.04 | DigitalOcean</a></li>
<li><a href="https://ivonblog.com/posts/linux-dns-server/">Ubuntu Linux如何修改DNS伺服器（指令 ＋ GUI） · Ivon的部落格</a></li>
</ul>
</li>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/configuring-the-order-of-dns-servers_configuring-and-managing-networking">Chapter 30. Configuring the order of DNS servers Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking">Chapter 33. Manually configuring the /etc/resolv.conf file Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li><a href="https://haway.30cm.gg/cloudflare-block-malware-adult/">阻擋色情網站的 DNS 設定 | 哈部落</a></li>
<li><a href="https://jianghaitao1221.github.io/2018/07/14/dns-servers-vs/">搭建DNS服务(二) - 姜海涛的博客 | Jht Blog</a></li>
<li>/etc/resolv.conf<ul>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking">Chapter 33. Manually configuring the /etc/resolv.conf file Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/configuring-the-order-of-dns-servers_configuring-and-managing-networking">Chapter 30. Configuring the order of DNS servers Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li>not going to next nameserver<ul>
<li><a href="https://man7.org/linux/man-pages/man5/resolv.conf.5.html">resolv.conf(5) - Linux manual page</a></li>
<li><a href="https://serverfault.com/questions/172915/ubuntu-resolv-conf-not-going-to-next-nameserver">domain name system - Ubuntu resolv.conf, not going to next nameserver? - Server Fault</a></li>
<li><a href="https://serverfault.com/questions/513271/why-dont-my-server-query-the-2nd-entry-in-my-resolv-conf">domain name system - Why don't my server query the 2nd entry in my resolv.conf? - Server Fault</a></li>
</ul>
</li>
</ul>
</li>
<li>hostname<ul>
<li><a href="https://serverfault.com/questions/261341/is-the-hostname-case-sensitive">domain name system - Is the hostname case sensitive? - Server Fault</a></li>
<li><a href="https://stackoverflow.com/questions/940466/does-http-hostname-case-upper-lower-matter">php - Does HTTP hostname case (upper/lower) matter? - Stack Overflow</a></li>
</ul>
</li>
</ul>
<h3 id="dnssec">DNSSEC</h3>
<ul>
<li><a href="https://www.cloudflare.com/zh-tw/learning/dns/dnssec/how-dnssec-works/">DNSSEC 如何運作？ | Cloudflare</a></li>
<li><a href="https://learn.microsoft.com/en-us/windows-server/networking/dns/validate-dnssec-responses">Validate and secure DNS responses using DNSSEC on DNS Server in Windows Server | Microsoft Learn</a></li>
<li><a href="https://superuser.com/questions/1776335/bind-9-dnssec-not-returning-servfail-when-it-should">dns - Bind 9 DNSSEC not returning SERVFAIL when it should - Super User</a></li>
</ul>
<h3 id="bind">bind</h3>
<ul>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_openstack_platform/8/html/dns-as-a-service_guide/install_and_configure_bind9#configure_auto_generation_of_dns_records_nova_fixed_and_neutron_floating">Chapter 3. Install and Configure Bind9 | Red Hat Product Documentation</a></li>
</ul>
<p>bind for Ubuntu
<a href="https://ubuntu.com/server/docs/domain-name-service-dns">Domain Name Service (DNS) | Ubuntu</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>/etc/bind/named.conf
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>/var/lib/bind/db*
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>/etc/resolv.conf
</span></code></pre></div></p>
<p>bind for Redhat
<a href="https://docs.redhat.com/en/documentation/red_hat_openstack_platform/8/html/dns-as-a-service_guide/install_and_configure_bind9#configure_bind">Chapter 3. Install and Configure Bind9 | Red Hat Product Documentation</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>/etc/named.conf
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>/var/named
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>/etc/resolv.conf
</span></code></pre></div></p>
<h4 id="verify">Verify</h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>named-checkconf /etc/named.conf
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>systemctl status named
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>rndc status
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>netstat -tap | grep named
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>netstat -tulpn | grep 53
</span></code></pre></div>
<h4 id="rndc">rndc</h4>
<ul>
<li><a href="https://bind9.readthedocs.io/en/v9_16_26/manpages.html#commands">Manual Pages — BIND 9 9.16.26 documentation</a></li>
<li><a href="https://jfearn.fedorapeople.org/fdocs/en-US/Fedora/20/html/Networking_Guide/sec-bind-rndc.html">10.2.4. Using the rndc Utility</a></li>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6/html/deployment_guide/s2-bind-rndc#s2-bind-rndc">17.2.3. Using the rndc Utility | Red Hat Product Documentation</a></li>
<li><a href="https://bobcares.com/blog/rndc-bind9/">RNDC Bind9 | Setup Guide</a></li>
<li><a href="https://serverfault.com/questions/671823/rndc-fails-to-add-zone-bind99-freebsd">domain name system - rndc fails to add zone, bind99 freebsd - Server Fault</a></li>
</ul>
<h4 id="nsupdate">nsupdate</h4>
<ul>
<li><a href="https://gist.github.com/fliphess/053209b5cb8d0cfa29df5b013eb22a19">Add dynamic DNS records to bind using nsupdate · GitHub</a></li>
<li><a href="https://www.ibm.com/docs/zh-tw/aix/7.3?topic=n-nsupdate-command">nsupdate 指令 - IBM 說明文件</a></li>
<li><a href="https://access.redhat.com/solutions/1635953">How to add TTL value to nsupdate while adding record in dns server for dynamic update? - Red Hat Customer Portal</a></li>
</ul>
<h3 id="coredns">CoreDNS</h3>
<ul>
<li><a href="https://dev.to/robbmanes/running-coredns-as-a-dns-server-in-a-container-1d0">Running CoreDNS as a DNS Server in a Container - DEV Community</a></li>
<li><a href="https://weng-albert.medium.com/coredns%E7%B0%A1%E5%96%AE%E9%99%A4%E9%8C%AF-%E8%A7%A3%E6%B1%BA%E4%BD%A0%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E8%88%AC%E5%95%8F%E9%A1%8C-71d255e39548">CoreDNS簡單除錯：解決你遇到的一般問題. 最近在部署一些解決方案時，碰到了關於名稱解析上的一些問題，雖然有時候不難解決，但… | by Albert Weng | Medium</a></li>
<li><a href="https://coredns.io/manual/configuration/">CoreDNS: DNS and Service Discovery</a></li>
</ul>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>docker run -d --name coredns \
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>--restart=always \
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>--volume=/root/coredns:/root/ \
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>-p 53:53/udp \
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>coredns/coredns -conf /root/Corefile
</span></code></pre></div>
/root/coredns/Corefile
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>.:53 {
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    forward . 8.8.8.8 9.9.9.9
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    log
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    errors
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>}
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>foo.bar:53 {
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    file /root/db.foo.bar
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    log
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>    errors
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>}
</span></code></pre></div></p>
<p>/root/coredns/db.foo.bar
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$ORIGIN foo.bar.
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>@       3600 IN SOA dns.foo.bar. mail.foo.bar. (
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>                                2024123016 ; serial
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>                                7200       ; refresh (2 hours)
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>                                3600       ; retry (1 hour)
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>                                1209600    ; expire (2 weeks)
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>                                3600       ; minimum (1 hour)
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>                                )
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>dns    IN  A   172.19.57.10
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>test   IN  A   172.19.57.10
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>beta-test IN  CNAME   test
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>dig @192.168.1.10  test.foo.bar
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>dig @192.168.1.10  beta-test.foo.bar
</span></code></pre></div>
<h2 id="dhcp">DHCP</h2>
<ul>
<li><a href="https://linux.vbird.org/linux_server/rocky9/0220dhcp_ntp.php">鳥哥私房菜 - 第九章、區域網路參數供應者：DHCP, NTP</a></li>
<li><a href="https://www.iana.org/assignments/bootp-dhcp-parameters/bootp-dhcp-parameters.xhtml">Dynamic Host Configuration Protocol (DHCP) and Bootstrap Protocol (BOOTP) Parameters</a></li>
<li><a href="https://linux.die.net/man/5/dhcpd.leases">dhcpd.leases(5): DHCP client lease database - Linux man page</a><ul>
<li><a href="https://serverfault.com/questions/351382/ubuntu-server-dhcp-duplicate-leases">Ubuntu server dhcp - duplicate leases - Server Fault</a></li>
</ul>
</li>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/8/html/managing_networking_infrastructure_services/providing-dhcp-services_networking-infrastructure-services">Chapter 3. Providing DHCP services Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/sec-dhcp-configuring-server">14.2. Configuring a DHCP Server Red Hat Enterprise Linux 7 | Red Hat Customer Portal</a></li>
<li><a href="https://linux.die.net/man/5/dhcpd.conf">dhcpd.conf(5): dhcpd config file - Linux man page</a></li>
<li><a href="https://access.redhat.com/solutions/6996382">Can't activate connection and get error "Activation failed: IP configuration could not be reserved (no available address, timeout, etc.)" - Red Hat Customer Portal</a></li>
<li><a href="https://www.kjnotes.com/linux/118">DHCP Server 設定及使用教學-使用 isc-dhcp 套件 | KJie Notes</a></li>
<li><a href="https://kb.isc.org/docs/aa-00502">A Basic Guide to Configuring DHCP Failover</a></li>
<li>authoritative<ul>
<li><a href="https://help.univention.com/t/problem-dhcp-not-authoritative-for/10113">Problem: DHCP "not authoritative for..." - Knowledge Base / Community - Univention Help</a></li>
<li><a href="https://www.weithenn.org/2012/05/freebsd-dhcp-server.html#Heading5-2">dhcpd: DHCPINFORM from 192.168.1.3 via bce1: not authoritative for subnet</a></li>
</ul>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>wget https://ftp.isc.org/isc/dhcp/4.4.3-P1/dhcp-4.4.3-P1.tar.gz
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>tar xvf dhcp-4.4.3-P1.tar.gz
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>sudo apt-get install build-essential
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>cd dhcp-4.4.3-P1
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>./configure --prefix=/usr --sysconfdir=/etc/dhcp --enable-binary-leases
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>make
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>sudo make install
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>vim /etc/init.d/isc-dhcp-server
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>systemctl daemon-reload
</span></code></pre></div>
<p>/etc/init.d/isc-dhcp-server
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>#!/bin/sh
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>### BEGIN INIT INFO
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a># Provides:          isc-dhcp-server
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a># Required-Start:    $remote_fs $network $syslog
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a># Required-Stop:     $remote_fs $network $syslog
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a># Should-Start:      $local_fs slapd $named
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a># Should-Stop:       $local_fs slapd
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a># Default-Start:     2 3 4 5
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a># Default-Stop:      0 1 6
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a># Short-Description: DHCP server
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a># Description:       Dynamic Host Configuration Protocol Server
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>### END INIT INFO
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>PATH=/sbin:/bin:/usr/sbin:/usr/bin
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>test -f /usr/sbin/dhcpd || exit 0
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>DHCPD_DEFAULT=&quot;${DHCPD_DEFAULT:-/etc/default/isc-dhcp-server}&quot;
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a># It is not safe to start if we don&#39;t have a default configuration...
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>if [ ! -f &quot;$DHCPD_DEFAULT&quot; ]; then
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>        echo &quot;$DHCPD_DEFAULT does not exist! - Aborting...&quot;
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>        if [ &quot;$DHCPD_DEFAULT&quot; = &quot;/etc/default/isc-dhcp-server&quot; ]; then
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>                echo &quot;Run &#39;dpkg-reconfigure isc-dhcp-server&#39; to fix the problem.&quot;
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>        fi
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>        exit 0
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>fi
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>
</span><span id="__span-19-30"><a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>. /lib/lsb/init-functions
</span><span id="__span-19-31"><a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>
</span><span id="__span-19-32"><a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a># Read init script configuration
</span><span id="__span-19-33"><a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>[ -f &quot;$DHCPD_DEFAULT&quot; ] &amp;&amp; . &quot;$DHCPD_DEFAULT&quot;
</span><span id="__span-19-34"><a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>
</span><span id="__span-19-35"><a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>NAME4=dhcpd
</span><span id="__span-19-36"><a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>NAME6=dhcpd6
</span><span id="__span-19-37"><a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>
</span><span id="__span-19-38"><a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>DESC4=&quot;ISC DHCPv4 server&quot;
</span><span id="__span-19-39"><a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>DESC6=&quot;ISC DHCPv6 server&quot;
</span><span id="__span-19-40"><a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>
</span><span id="__span-19-41"><a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a># use already specified config file or fallback to defaults
</span><span id="__span-19-42"><a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>DHCPDv4_CONF=${DHCPDv4_CONF:-/etc/dhcp/dhcpd.conf}
</span><span id="__span-19-43"><a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a>DHCPDv6_CONF=${DHCPDv6_CONF:-/etc/dhcp/dhcpd6.conf}
</span><span id="__span-19-44"><a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a>
</span><span id="__span-19-45"><a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a># try to read pid file name from config file or fallback to defaults
</span><span id="__span-19-46"><a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a>if [ -z &quot;$DHCPDv4_PID&quot; ]; then
</span><span id="__span-19-47"><a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a>        DHCPDv4_PID=$(sed -n -e &#39;s/^[ \t]*pid-file-name[ \t]*&quot;\(.*\)&quot;[ \t]*;.*$/\1/p&#39; &lt; &quot;$DHCPDv4_CONF&quot; 2&gt;/dev/null | head -n 1)
</span><span id="__span-19-48"><a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a>fi
</span><span id="__span-19-49"><a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>if [ -z &quot;$DHCPDv6_PID&quot; ]; then
</span><span id="__span-19-50"><a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>        DHCPDv6_PID=$(sed -n -e &#39;s/^[ \t]*dhcpv6-pid-file-name[ \t]*&quot;\(.*\)&quot;[ \t]*;.*$/\1/p&#39; &lt; &quot;$DHCPDv6_CONF&quot; 2&gt;/dev/null | head -n 1)
</span><span id="__span-19-51"><a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>fi
</span><span id="__span-19-52"><a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a>DHCPDv4_PID=&quot;${DHCPDv4_PID:-/var/run/dhcpd.pid}&quot;
</span><span id="__span-19-53"><a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>DHCPDv6_PID=&quot;${DHCPDv6_PID:-/var/run/dhcpd6.pid}&quot;
</span><span id="__span-19-54"><a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>
</span><span id="__span-19-55"><a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a>test_config()
</span><span id="__span-19-56"><a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a>{
</span><span id="__span-19-57"><a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>        VERSION=&quot;$1&quot;
</span><span id="__span-19-58"><a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a>        CONF=&quot;$2&quot;
</span><span id="__span-19-59"><a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a>
</span><span id="__span-19-60"><a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a>        if ! /usr/sbin/dhcpd -t $VERSION -q -cf &quot;$CONF&quot; &gt; /dev/null 2&gt;&amp;1; then
</span><span id="__span-19-61"><a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a>                echo &quot;dhcpd self-test failed. Please fix $CONF.&quot;
</span><span id="__span-19-62"><a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a>                echo &quot;The error was: &quot;
</span><span id="__span-19-63"><a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a>                /usr/sbin/dhcpd -t $VERSION -cf &quot;$CONF&quot;
</span><span id="__span-19-64"><a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a>                exit 1
</span><span id="__span-19-65"><a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a>        fi
</span><span id="__span-19-66"><a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a>}
</span><span id="__span-19-67"><a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a>
</span><span id="__span-19-68"><a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a>check_status()
</span><span id="__span-19-69"><a id="__codelineno-19-69" name="__codelineno-19-69" href="#__codelineno-19-69"></a>{
</span><span id="__span-19-70"><a id="__codelineno-19-70" name="__codelineno-19-70" href="#__codelineno-19-70"></a>        OPTION=&quot;$1&quot;
</span><span id="__span-19-71"><a id="__codelineno-19-71" name="__codelineno-19-71" href="#__codelineno-19-71"></a>        PIDFILE=&quot;$2&quot;
</span><span id="__span-19-72"><a id="__codelineno-19-72" name="__codelineno-19-72" href="#__codelineno-19-72"></a>        NAME=&quot;$3&quot;
</span><span id="__span-19-73"><a id="__codelineno-19-73" name="__codelineno-19-73" href="#__codelineno-19-73"></a>
</span><span id="__span-19-74"><a id="__codelineno-19-74" name="__codelineno-19-74" href="#__codelineno-19-74"></a>        if [ ! -r &quot;$PIDFILE&quot; ]; then
</span><span id="__span-19-75"><a id="__codelineno-19-75" name="__codelineno-19-75" href="#__codelineno-19-75"></a>                test &quot;$OPTION&quot; != -v || echo &quot;$NAME is not running.&quot;
</span><span id="__span-19-76"><a id="__codelineno-19-76" name="__codelineno-19-76" href="#__codelineno-19-76"></a>                return 3
</span><span id="__span-19-77"><a id="__codelineno-19-77" name="__codelineno-19-77" href="#__codelineno-19-77"></a>        fi
</span><span id="__span-19-78"><a id="__codelineno-19-78" name="__codelineno-19-78" href="#__codelineno-19-78"></a>
</span><span id="__span-19-79"><a id="__codelineno-19-79" name="__codelineno-19-79" href="#__codelineno-19-79"></a>        if read pid &lt; &quot;$PIDFILE&quot; &amp;&amp; ps -p &quot;$pid&quot; &gt; /dev/null 2&gt;&amp;1; then
</span><span id="__span-19-80"><a id="__codelineno-19-80" name="__codelineno-19-80" href="#__codelineno-19-80"></a>                test &quot;$OPTION&quot; != -v || echo &quot;$NAME is running.&quot;
</span><span id="__span-19-81"><a id="__codelineno-19-81" name="__codelineno-19-81" href="#__codelineno-19-81"></a>                return 0
</span><span id="__span-19-82"><a id="__codelineno-19-82" name="__codelineno-19-82" href="#__codelineno-19-82"></a>        else
</span><span id="__span-19-83"><a id="__codelineno-19-83" name="__codelineno-19-83" href="#__codelineno-19-83"></a>                test &quot;$OPTION&quot; != -v || echo &quot;$NAME is not running but $PIDFILE exists.&quot;
</span><span id="__span-19-84"><a id="__codelineno-19-84" name="__codelineno-19-84" href="#__codelineno-19-84"></a>                return 1
</span><span id="__span-19-85"><a id="__codelineno-19-85" name="__codelineno-19-85" href="#__codelineno-19-85"></a>        fi
</span><span id="__span-19-86"><a id="__codelineno-19-86" name="__codelineno-19-86" href="#__codelineno-19-86"></a>}
</span><span id="__span-19-87"><a id="__codelineno-19-87" name="__codelineno-19-87" href="#__codelineno-19-87"></a>
</span><span id="__span-19-88"><a id="__codelineno-19-88" name="__codelineno-19-88" href="#__codelineno-19-88"></a>start_daemon()
</span><span id="__span-19-89"><a id="__codelineno-19-89" name="__codelineno-19-89" href="#__codelineno-19-89"></a>{
</span><span id="__span-19-90"><a id="__codelineno-19-90" name="__codelineno-19-90" href="#__codelineno-19-90"></a>        VERSION=&quot;$1&quot;
</span><span id="__span-19-91"><a id="__codelineno-19-91" name="__codelineno-19-91" href="#__codelineno-19-91"></a>        CONF=&quot;$2&quot;
</span><span id="__span-19-92"><a id="__codelineno-19-92" name="__codelineno-19-92" href="#__codelineno-19-92"></a>        NAME=&quot;$3&quot;
</span><span id="__span-19-93"><a id="__codelineno-19-93" name="__codelineno-19-93" href="#__codelineno-19-93"></a>        PIDFILE=&quot;$4&quot;
</span><span id="__span-19-94"><a id="__codelineno-19-94" name="__codelineno-19-94" href="#__codelineno-19-94"></a>        DESC=&quot;$5&quot;
</span><span id="__span-19-95"><a id="__codelineno-19-95" name="__codelineno-19-95" href="#__codelineno-19-95"></a>
</span><span id="__span-19-96"><a id="__codelineno-19-96" name="__codelineno-19-96" href="#__codelineno-19-96"></a>        shift 5
</span><span id="__span-19-97"><a id="__codelineno-19-97" name="__codelineno-19-97" href="#__codelineno-19-97"></a>        INTERFACES=&quot;$*&quot;
</span><span id="__span-19-98"><a id="__codelineno-19-98" name="__codelineno-19-98" href="#__codelineno-19-98"></a>
</span><span id="__span-19-99"><a id="__codelineno-19-99" name="__codelineno-19-99" href="#__codelineno-19-99"></a>        test_config &quot;$VERSION&quot; &quot;$CONF&quot;
</span><span id="__span-19-100"><a id="__codelineno-19-100" name="__codelineno-19-100" href="#__codelineno-19-100"></a>        log_daemon_msg &quot;Starting $DESC&quot; &quot;$NAME&quot;
</span><span id="__span-19-101"><a id="__codelineno-19-101" name="__codelineno-19-101" href="#__codelineno-19-101"></a>
</span><span id="__span-19-102"><a id="__codelineno-19-102" name="__codelineno-19-102" href="#__codelineno-19-102"></a>        if [ -e &quot;$PIDFILE&quot; ]; then
</span><span id="__span-19-103"><a id="__codelineno-19-103" name="__codelineno-19-103" href="#__codelineno-19-103"></a>                log_failure_msg &quot;dhcpd service already running (pid file $PIDFILE currenty exists)&quot;
</span><span id="__span-19-104"><a id="__codelineno-19-104" name="__codelineno-19-104" href="#__codelineno-19-104"></a>                exit 1
</span><span id="__span-19-105"><a id="__codelineno-19-105" name="__codelineno-19-105" href="#__codelineno-19-105"></a>        fi
</span><span id="__span-19-106"><a id="__codelineno-19-106" name="__codelineno-19-106" href="#__codelineno-19-106"></a>
</span><span id="__span-19-107"><a id="__codelineno-19-107" name="__codelineno-19-107" href="#__codelineno-19-107"></a>        touch /var/lib/dhcp/$NAME.leases
</span><span id="__span-19-108"><a id="__codelineno-19-108" name="__codelineno-19-108" href="#__codelineno-19-108"></a>
</span><span id="__span-19-109"><a id="__codelineno-19-109" name="__codelineno-19-109" href="#__codelineno-19-109"></a>        start-stop-daemon --start --quiet --pidfile $PIDFILE \
</span><span id="__span-19-110"><a id="__codelineno-19-110" name="__codelineno-19-110" href="#__codelineno-19-110"></a>                --exec /usr/sbin/dhcpd -- $VERSION -q -cf $CONF $INTERFACES
</span><span id="__span-19-111"><a id="__codelineno-19-111" name="__codelineno-19-111" href="#__codelineno-19-111"></a>        sleep 2
</span><span id="__span-19-112"><a id="__codelineno-19-112" name="__codelineno-19-112" href="#__codelineno-19-112"></a>
</span><span id="__span-19-113"><a id="__codelineno-19-113" name="__codelineno-19-113" href="#__codelineno-19-113"></a>        if check_status -q $PIDFILE $NAME; then
</span><span id="__span-19-114"><a id="__codelineno-19-114" name="__codelineno-19-114" href="#__codelineno-19-114"></a>                log_end_msg 0
</span><span id="__span-19-115"><a id="__codelineno-19-115" name="__codelineno-19-115" href="#__codelineno-19-115"></a>        else
</span><span id="__span-19-116"><a id="__codelineno-19-116" name="__codelineno-19-116" href="#__codelineno-19-116"></a>                log_failure_msg &quot;check syslog for diagnostics.&quot;
</span><span id="__span-19-117"><a id="__codelineno-19-117" name="__codelineno-19-117" href="#__codelineno-19-117"></a>                log_end_msg 1
</span><span id="__span-19-118"><a id="__codelineno-19-118" name="__codelineno-19-118" href="#__codelineno-19-118"></a>                exit 1
</span><span id="__span-19-119"><a id="__codelineno-19-119" name="__codelineno-19-119" href="#__codelineno-19-119"></a>        fi
</span><span id="__span-19-120"><a id="__codelineno-19-120" name="__codelineno-19-120" href="#__codelineno-19-120"></a>}
</span><span id="__span-19-121"><a id="__codelineno-19-121" name="__codelineno-19-121" href="#__codelineno-19-121"></a>
</span><span id="__span-19-122"><a id="__codelineno-19-122" name="__codelineno-19-122" href="#__codelineno-19-122"></a>stop_daemon()
</span><span id="__span-19-123"><a id="__codelineno-19-123" name="__codelineno-19-123" href="#__codelineno-19-123"></a>{
</span><span id="__span-19-124"><a id="__codelineno-19-124" name="__codelineno-19-124" href="#__codelineno-19-124"></a>        if check_status -q $DHCPDv4_PID $NAME4; then
</span><span id="__span-19-125"><a id="__codelineno-19-125" name="__codelineno-19-125" href="#__codelineno-19-125"></a>                log_daemon_msg &quot;Stopping $DESC4&quot; &quot;$NAME4&quot;
</span><span id="__span-19-126"><a id="__codelineno-19-126" name="__codelineno-19-126" href="#__codelineno-19-126"></a>                start-stop-daemon --stop --quiet --pidfile $DHCPDv4_PID
</span><span id="__span-19-127"><a id="__codelineno-19-127" name="__codelineno-19-127" href="#__codelineno-19-127"></a>                log_end_msg $?
</span><span id="__span-19-128"><a id="__codelineno-19-128" name="__codelineno-19-128" href="#__codelineno-19-128"></a>                rm -f &quot;$DHCPDv4_PID&quot;
</span><span id="__span-19-129"><a id="__codelineno-19-129" name="__codelineno-19-129" href="#__codelineno-19-129"></a>        fi
</span><span id="__span-19-130"><a id="__codelineno-19-130" name="__codelineno-19-130" href="#__codelineno-19-130"></a>
</span><span id="__span-19-131"><a id="__codelineno-19-131" name="__codelineno-19-131" href="#__codelineno-19-131"></a>        if check_status -q $DHCPDv6_PID $NAME6; then
</span><span id="__span-19-132"><a id="__codelineno-19-132" name="__codelineno-19-132" href="#__codelineno-19-132"></a>                log_daemon_msg &quot;Stopping $DESC6&quot; &quot;$NAME6&quot;
</span><span id="__span-19-133"><a id="__codelineno-19-133" name="__codelineno-19-133" href="#__codelineno-19-133"></a>                start-stop-daemon --stop --quiet --pidfile $DHCPDv6_PID
</span><span id="__span-19-134"><a id="__codelineno-19-134" name="__codelineno-19-134" href="#__codelineno-19-134"></a>                log_end_msg $?
</span><span id="__span-19-135"><a id="__codelineno-19-135" name="__codelineno-19-135" href="#__codelineno-19-135"></a>                rm -f &quot;$DHCPDv6_PID&quot;
</span><span id="__span-19-136"><a id="__codelineno-19-136" name="__codelineno-19-136" href="#__codelineno-19-136"></a>        fi
</span><span id="__span-19-137"><a id="__codelineno-19-137" name="__codelineno-19-137" href="#__codelineno-19-137"></a>}
</span><span id="__span-19-138"><a id="__codelineno-19-138" name="__codelineno-19-138" href="#__codelineno-19-138"></a>
</span><span id="__span-19-139"><a id="__codelineno-19-139" name="__codelineno-19-139" href="#__codelineno-19-139"></a>case &quot;$1&quot; in
</span><span id="__span-19-140"><a id="__codelineno-19-140" name="__codelineno-19-140" href="#__codelineno-19-140"></a>        start)
</span><span id="__span-19-141"><a id="__codelineno-19-141" name="__codelineno-19-141" href="#__codelineno-19-141"></a>                if test -n &quot;$INTERFACES&quot; -a -z &quot;$INTERFACESv4&quot;; then
</span><span id="__span-19-142"><a id="__codelineno-19-142" name="__codelineno-19-142" href="#__codelineno-19-142"></a>                        echo &quot;DHCPv4 interfaces are no longer set by the INTERFACES variable in&quot; &gt;&amp;2
</span><span id="__span-19-143"><a id="__codelineno-19-143" name="__codelineno-19-143" href="#__codelineno-19-143"></a>                        echo &quot;/etc/default/isc-dhcp-server.  Please use INTERFACESv4 instead.&quot; &gt;&amp;2
</span><span id="__span-19-144"><a id="__codelineno-19-144" name="__codelineno-19-144" href="#__codelineno-19-144"></a>                        echo &quot;Migrating automatically for now, but this will go away in the future.&quot; &gt;&amp;2
</span><span id="__span-19-145"><a id="__codelineno-19-145" name="__codelineno-19-145" href="#__codelineno-19-145"></a>                        INTERFACESv4=&quot;$INTERFACES&quot;
</span><span id="__span-19-146"><a id="__codelineno-19-146" name="__codelineno-19-146" href="#__codelineno-19-146"></a>                fi
</span><span id="__span-19-147"><a id="__codelineno-19-147" name="__codelineno-19-147" href="#__codelineno-19-147"></a>                if test -n &quot;$INTERFACESv4&quot;; then
</span><span id="__span-19-148"><a id="__codelineno-19-148" name="__codelineno-19-148" href="#__codelineno-19-148"></a>                        echo &quot;Launching IPv4 server only.&quot;
</span><span id="__span-19-149"><a id="__codelineno-19-149" name="__codelineno-19-149" href="#__codelineno-19-149"></a>                        start_daemon &quot;-4&quot; &quot;$DHCPDv4_CONF&quot; &quot;$NAME4&quot; \
</span><span id="__span-19-150"><a id="__codelineno-19-150" name="__codelineno-19-150" href="#__codelineno-19-150"></a>                                &quot;$DHCPDv4_PID&quot; &quot;$DESC4&quot; &quot;$INTERFACESv4&quot;
</span><span id="__span-19-151"><a id="__codelineno-19-151" name="__codelineno-19-151" href="#__codelineno-19-151"></a>                fi
</span><span id="__span-19-152"><a id="__codelineno-19-152" name="__codelineno-19-152" href="#__codelineno-19-152"></a>                if test -n &quot;$INTERFACESv6&quot;; then
</span><span id="__span-19-153"><a id="__codelineno-19-153" name="__codelineno-19-153" href="#__codelineno-19-153"></a>                        echo &quot;Launching IPv6 server only.&quot;
</span><span id="__span-19-154"><a id="__codelineno-19-154" name="__codelineno-19-154" href="#__codelineno-19-154"></a>                        start_daemon &quot;-6&quot; &quot;$DHCPDv6_CONF&quot; &quot;$NAME6&quot; \
</span><span id="__span-19-155"><a id="__codelineno-19-155" name="__codelineno-19-155" href="#__codelineno-19-155"></a>                                &quot;$DHCPDv6_PID&quot; &quot;$DESC6&quot; &quot;$INTERFACESv6&quot;
</span><span id="__span-19-156"><a id="__codelineno-19-156" name="__codelineno-19-156" href="#__codelineno-19-156"></a>                fi
</span><span id="__span-19-157"><a id="__codelineno-19-157" name="__codelineno-19-157" href="#__codelineno-19-157"></a>                if test -z &quot;$INTERFACESv4&quot; -a -z &quot;$INTERFACESv6&quot;; then
</span><span id="__span-19-158"><a id="__codelineno-19-158" name="__codelineno-19-158" href="#__codelineno-19-158"></a>                        echo &quot;Launching both IPv4 and IPv6 servers (please configure INTERFACES in /etc/default/isc-dhcp-server if you only want one or the other).&quot;
</span><span id="__span-19-159"><a id="__codelineno-19-159" name="__codelineno-19-159" href="#__codelineno-19-159"></a>                        start_daemon &quot;-4&quot; &quot;$DHCPDv4_CONF&quot; &quot;$NAME4&quot; \
</span><span id="__span-19-160"><a id="__codelineno-19-160" name="__codelineno-19-160" href="#__codelineno-19-160"></a>                                &quot;$DHCPDv4_PID&quot; &quot;$DESC4&quot; &quot;&quot;
</span><span id="__span-19-161"><a id="__codelineno-19-161" name="__codelineno-19-161" href="#__codelineno-19-161"></a>                        start_daemon &quot;-6&quot; &quot;$DHCPDv6_CONF&quot; &quot;$NAME6&quot; \
</span><span id="__span-19-162"><a id="__codelineno-19-162" name="__codelineno-19-162" href="#__codelineno-19-162"></a>                                &quot;$DHCPDv6_PID&quot; &quot;$DESC6&quot; &quot;&quot;
</span><span id="__span-19-163"><a id="__codelineno-19-163" name="__codelineno-19-163" href="#__codelineno-19-163"></a>                fi
</span><span id="__span-19-164"><a id="__codelineno-19-164" name="__codelineno-19-164" href="#__codelineno-19-164"></a>                ;;
</span><span id="__span-19-165"><a id="__codelineno-19-165" name="__codelineno-19-165" href="#__codelineno-19-165"></a>        stop)
</span><span id="__span-19-166"><a id="__codelineno-19-166" name="__codelineno-19-166" href="#__codelineno-19-166"></a>                stop_daemon
</span><span id="__span-19-167"><a id="__codelineno-19-167" name="__codelineno-19-167" href="#__codelineno-19-167"></a>                ;;
</span><span id="__span-19-168"><a id="__codelineno-19-168" name="__codelineno-19-168" href="#__codelineno-19-168"></a>        restart | force-reload)
</span><span id="__span-19-169"><a id="__codelineno-19-169" name="__codelineno-19-169" href="#__codelineno-19-169"></a>                $0 stop
</span><span id="__span-19-170"><a id="__codelineno-19-170" name="__codelineno-19-170" href="#__codelineno-19-170"></a>                sleep 2
</span><span id="__span-19-171"><a id="__codelineno-19-171" name="__codelineno-19-171" href="#__codelineno-19-171"></a>                $0 start
</span><span id="__span-19-172"><a id="__codelineno-19-172" name="__codelineno-19-172" href="#__codelineno-19-172"></a>                if [ &quot;$?&quot; != &quot;0&quot; ]; then
</span><span id="__span-19-173"><a id="__codelineno-19-173" name="__codelineno-19-173" href="#__codelineno-19-173"></a>                        exit 1
</span><span id="__span-19-174"><a id="__codelineno-19-174" name="__codelineno-19-174" href="#__codelineno-19-174"></a>                fi
</span><span id="__span-19-175"><a id="__codelineno-19-175" name="__codelineno-19-175" href="#__codelineno-19-175"></a>                ;;
</span><span id="__span-19-176"><a id="__codelineno-19-176" name="__codelineno-19-176" href="#__codelineno-19-176"></a>        status)
</span><span id="__span-19-177"><a id="__codelineno-19-177" name="__codelineno-19-177" href="#__codelineno-19-177"></a>                if test -n &quot;$INTERFACES&quot; -a -z &quot;$INTERFACESv4&quot;; then
</span><span id="__span-19-178"><a id="__codelineno-19-178" name="__codelineno-19-178" href="#__codelineno-19-178"></a>                        INTERFACESv4=&quot;$INTERFACES&quot;
</span><span id="__span-19-179"><a id="__codelineno-19-179" name="__codelineno-19-179" href="#__codelineno-19-179"></a>                fi
</span><span id="__span-19-180"><a id="__codelineno-19-180" name="__codelineno-19-180" href="#__codelineno-19-180"></a>                if test -n &quot;$INTERFACESv4&quot;; then
</span><span id="__span-19-181"><a id="__codelineno-19-181" name="__codelineno-19-181" href="#__codelineno-19-181"></a>                        echo -n &quot;Status of $DESC4: &quot;
</span><span id="__span-19-182"><a id="__codelineno-19-182" name="__codelineno-19-182" href="#__codelineno-19-182"></a>                        check_status -v $DHCPDv4_PID $NAME4 || exit $?
</span><span id="__span-19-183"><a id="__codelineno-19-183" name="__codelineno-19-183" href="#__codelineno-19-183"></a>                fi
</span><span id="__span-19-184"><a id="__codelineno-19-184" name="__codelineno-19-184" href="#__codelineno-19-184"></a>                if test -n &quot;$INTERFACESv6&quot;; then
</span><span id="__span-19-185"><a id="__codelineno-19-185" name="__codelineno-19-185" href="#__codelineno-19-185"></a>                        echo -n &quot;Status of $DESC6: &quot;
</span><span id="__span-19-186"><a id="__codelineno-19-186" name="__codelineno-19-186" href="#__codelineno-19-186"></a>                        check_status -v $DHCPDv6_PID $NAME6 || exit $?
</span><span id="__span-19-187"><a id="__codelineno-19-187" name="__codelineno-19-187" href="#__codelineno-19-187"></a>                fi
</span><span id="__span-19-188"><a id="__codelineno-19-188" name="__codelineno-19-188" href="#__codelineno-19-188"></a>                ;;
</span><span id="__span-19-189"><a id="__codelineno-19-189" name="__codelineno-19-189" href="#__codelineno-19-189"></a>        *)
</span><span id="__span-19-190"><a id="__codelineno-19-190" name="__codelineno-19-190" href="#__codelineno-19-190"></a>                echo &quot;Usage: $0 {start|stop|restart|force-reload|status}&quot;
</span><span id="__span-19-191"><a id="__codelineno-19-191" name="__codelineno-19-191" href="#__codelineno-19-191"></a>                exit 1
</span><span id="__span-19-192"><a id="__codelineno-19-192" name="__codelineno-19-192" href="#__codelineno-19-192"></a>esac
</span><span id="__span-19-193"><a id="__codelineno-19-193" name="__codelineno-19-193" href="#__codelineno-19-193"></a>
</span><span id="__span-19-194"><a id="__codelineno-19-194" name="__codelineno-19-194" href="#__codelineno-19-194"></a>exit 0
</span></code></pre></div></p>
<p>/etc/dhcp/dhcpd.conf
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>lease-file-name &quot;/var/lib/dhcp/dhcpd.leases&quot;;
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>option client-architecture code 93 = unsigned integer 16;
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>shared-network ens160 {
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    subnet 192.168.1.0 netmask 255.255.255.0 {
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>        max-lease-time 43200;
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>        min-lease-time 43200;
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>        default-lease-time 43200;
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>        range 192.168.1.100 192.168.1.200;
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>        option routers 192.168.1.1;
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>        option subnet-mask 255.255.255.0;
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>        option domain-name-servers 8.8.8.8;
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>        option domain-name &quot;yourdomain.local&quot;;
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>        next-server 192.168.1.10;  # IP of your PXE server
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>        if option client-architecture = 00:07 {
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>           filename &quot;mboot.efi&quot;;
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>        }
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>        else if option client-architecture = 00:09 {
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>           filename &quot;mboot.efi&quot;;
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>        }
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>    }
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>}
</span></code></pre></div></p>
<p>/etc/default/isc-dhcp-server
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Defaults for isc-dhcp-server (sourced by /etc/init.d/isc-dhcp-server)</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># Path to dhcpd&#39;s config file (default: /etc/dhcp/dhcpd.conf).</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="nv">DHCPDv4_CONF</span><span class="o">=</span>/etc/dhcp/dhcpd.conf
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="c1">#DHCPDv6_CONF=/etc/dhcp/dhcpd6.conf</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="c1"># Path to dhcpd&#39;s PID file (default: /var/run/dhcpd.pid).</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="nv">DHCPDv4_PID</span><span class="o">=</span>/var/run/dhcpd.pid
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="c1">#DHCPDv6_PID=/var/run/dhcpd6.pid</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="c1"># Additional options to start dhcpd with.</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="c1">#       Don&#39;t use options -cf or -pf here; use DHCPD_CONF/ DHCPD_PID instead</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="c1">#OPTIONS=&quot;&quot;</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="c1"># On what interfaces should the DHCP server (dhcpd) serve DHCP requests?</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="c1">#       Separate multiple interfaces with spaces, e.g. &quot;eth0 eth1&quot;.</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="c1">#INTERFACESv4=&quot;ens160&quot;</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="nv">INTERFACESv4</span><span class="o">=</span><span class="s2">&quot;ens160&quot;</span>
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a># Ubunut isc-dhcp-server service
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>dhcp-lease-list
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>ls -la /var/lib/dhcp/dhcpd.leases
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>wget https://sources.debian.org/data/main/i/isc-dhcp/4.4.3-P1-5/contrib/dhcp-lease-list.pl
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>chmod +x dhcp-lease-list.pl
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>./dhcp-lease-list.pl --parsable
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>/var/lib/dhcpd/dhcpd.leases
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>/etc/dhcp/dhcpd.conf
</span></code></pre></div>
<h3 id="detect-dhcp-server-in-the-subnet">detect dhcp server in the subnet</h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>sudo tcpdump -i &lt;interface&gt; port 67 or port 68 -n
</span></code></pre></div>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>14:04:36.123456 IP 192.168.1.1.67 &gt; 192.168.1.100.68: BOOTP/DHCP, Reply, length 300
</span></code></pre></div>
192.168.1.1 is the dhcp server</p>
<p>release and renew
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a># release and renew
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>ip link set &lt;interface&gt; down &amp;&amp; ip link set &lt;interface&gt; up
</span></code></pre></div></p>
<p>OR</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a># release and renew
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>dhclient -r &lt;interface&gt; &amp;&amp; dhclient &lt;interface&gt;
</span></code></pre></div>
<h2 id="configure-linux-as-a-router">Configure Linux as a Router</h2>
<ul>
<li><a href="https://www.linode.com/docs/guides/linux-router-and-ip-forwarding/#enable-ip-forwarding">Configure Linux as a Router (IP Forwarding) | Linode Docs</a></li>
<li><a href="https://www.techrepublic.com/article/installing-and-configuring-a-linux-gateway/">Installing and configuring a Linux gateway | TechRepublic</a></li>
<li><a href="https://www.tecmint.com/setup-linux-as-router/">How to Turn a Linux Server into a Router to Handle Traffic Statically and Dynamically - Part 10</a><ul>
<li><a href="https://www.geeksforgeeks.org/how-to-turn-a-linux-server-into-a-router-to-handle-traffic-statically-and-dynamically/">How to Turn a Linux Server into a Router to Handle Traffic Statically and Dynamically - GeeksforGeeks</a></li>
</ul>
</li>
<li><a href="https://forums.centos.org/viewtopic.php?t=53819">[SOLVED] Configuring firewalld to act as a router - CentOS</a></li>
<li>
<p>DNS</p>
<ul>
<li><a href="https://askubuntu.com/questions/743819/connection-timed-out-no-servers-could-be-reached-error">14.04 - Connection timed out; no servers could be reached error - Ask Ubuntu</a></li>
<li><a href="https://linux.vbird.org/linux_server/centos6/0350dns.php#forwards">鳥哥私房菜 - 第十九章、主機名稱控制者： DNS 伺服器</a></li>
</ul>
</li>
<li>
<p>check ipforward is enable
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>sudo sysctl net.ipv4.ip_forward
</span></code></pre></div></p>
</li>
</ul>
<p>(optional) If this parameter is disabled (0)</p>
<p>/etc/sysctl.conf
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>net.ipv4.ip_forward = 1
</span></code></pre></div></p>
<p>apply the changes
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>sysctl -p
</span></code></pre></div></p>
<ol>
<li>check the iptable
eno1 is the interface to internet
eno3 is the interface to intranet</li>
</ol>
<p>if using the firewalld
- <a href="https://discussion.fedoraproject.org/t/named-and-firewalld/69804/3">Named and firewalld - Fedora Discussion</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>firewall-cmd --get-active-zones
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>firewall-cmd --change-interface=eno1 --zone=external
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>firewall-cmd --change-interface=eno3 --zone=internal
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>firewall-cmd --add-service=dns --zone=internal
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>firewall-cmd --list-all --zone=external
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>firewall-cmd --list-all --zone=internal
</span></code></pre></div></p>
<p>(optional: using iptables directly) =&gt; not complete for dns query
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>iptables -t nat -A POSTROUTING -o eno1 -j MASQUERADE
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>iptables -A FORWARD -i eno1 -o eno3 -m state --state RELATED,ESTABLISHED -j ACCEPT
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>iptables -A FORWARD -i eno3 -o eno1 -j ACCEPT
</span></code></pre></div></p>
<p>Add direct rules to <strong>firewalld</strong>. Add the --permanent option to keep these rules across restarts.
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>firewall-cmd --direct --add-rule ipv4 nat POSTROUTING 0 -o eno1 -j MASQUERADE
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i eno3 -o eno1 -j ACCEPT
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i eno1 -o eno3 -m state --state RELATED,ESTABLISHED -j ACCEPT
</span></code></pre></div></p>
<ol>
<li>DNS cache-only and forward
/etc/named.conf</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>options {
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>        listen-on port 53 { any; };
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>        listen-on-v6 port 53 { ::1; };
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>        directory       &quot;/var/named&quot;;
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>        dump-file       &quot;/var/named/data/cache_dump.db&quot;;
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>        statistics-file &quot;/var/named/data/named_stats.txt&quot;;
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>        secroots-file   &quot;/var/named/data/named.secroots&quot;;
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>        recursing-file  &quot;/var/named/data/named.recursing&quot;;
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>        allow-query     { 167.23.0.0/16; };
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>        /*
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>         - If you are building a RECURSIVE (caching) DNS server, you need to enable
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>           recursion.
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>         - If your recursive DNS server has a public IP address, you MUST enable access
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>           control to limit queries to your legitimate users. Failing to do so will
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>           cause your server to become part of large scale DNS amplification
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>           attacks. Implementing BCP38 within your network would greatly
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>           reduce such attack surface
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>        */
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>        recursion yes;
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>        forward only ;
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>        forwarders {
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>         8.8.8.8;
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a>        };
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a>
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a>        dnssec-enable yes;
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>        dnssec-validation yes;
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a>
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a>        managed-keys-directory &quot;/var/named/dynamic&quot;;
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a>
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a>        pid-file &quot;/run/named/named.pid&quot;;
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a>        session-keyfile &quot;/run/named/session.key&quot;;
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a>
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a>        /* https://fedoraproject.org/wiki/Changes/CryptoPolicy */
</span><span id="__span-35-37"><a id="__codelineno-35-37" name="__codelineno-35-37" href="#__codelineno-35-37"></a>        include &quot;/etc/crypto-policies/back-ends/bind.config&quot;;
</span><span id="__span-35-38"><a id="__codelineno-35-38" name="__codelineno-35-38" href="#__codelineno-35-38"></a>};
</span><span id="__span-35-39"><a id="__codelineno-35-39" name="__codelineno-35-39" href="#__codelineno-35-39"></a>
</span><span id="__span-35-40"><a id="__codelineno-35-40" name="__codelineno-35-40" href="#__codelineno-35-40"></a>logging {
</span><span id="__span-35-41"><a id="__codelineno-35-41" name="__codelineno-35-41" href="#__codelineno-35-41"></a>        channel default_debug {
</span><span id="__span-35-42"><a id="__codelineno-35-42" name="__codelineno-35-42" href="#__codelineno-35-42"></a>                file &quot;data/named.run&quot;;
</span><span id="__span-35-43"><a id="__codelineno-35-43" name="__codelineno-35-43" href="#__codelineno-35-43"></a>                severity dynamic;
</span><span id="__span-35-44"><a id="__codelineno-35-44" name="__codelineno-35-44" href="#__codelineno-35-44"></a>        };
</span><span id="__span-35-45"><a id="__codelineno-35-45" name="__codelineno-35-45" href="#__codelineno-35-45"></a>};
</span><span id="__span-35-46"><a id="__codelineno-35-46" name="__codelineno-35-46" href="#__codelineno-35-46"></a>
</span><span id="__span-35-47"><a id="__codelineno-35-47" name="__codelineno-35-47" href="#__codelineno-35-47"></a>zone &quot;.&quot; IN {
</span><span id="__span-35-48"><a id="__codelineno-35-48" name="__codelineno-35-48" href="#__codelineno-35-48"></a>        type hint;
</span><span id="__span-35-49"><a id="__codelineno-35-49" name="__codelineno-35-49" href="#__codelineno-35-49"></a>        file &quot;named.ca&quot;;
</span><span id="__span-35-50"><a id="__codelineno-35-50" name="__codelineno-35-50" href="#__codelineno-35-50"></a>};
</span><span id="__span-35-51"><a id="__codelineno-35-51" name="__codelineno-35-51" href="#__codelineno-35-51"></a>
</span><span id="__span-35-52"><a id="__codelineno-35-52" name="__codelineno-35-52" href="#__codelineno-35-52"></a>include &quot;/etc/named.rfc1912.zones&quot;;
</span><span id="__span-35-53"><a id="__codelineno-35-53" name="__codelineno-35-53" href="#__codelineno-35-53"></a>include &quot;/etc/named.root.key&quot;;
</span></code></pre></div>
<h2 id="troubshooting-for-connection-problems">Troubshooting for connection problems</h2>
<ul>
<li><a href="https://access.redhat.com/solutions/46885">Why does ethtool show 'no link' for ethernet interface even though cable is physically connected? - Red Hat Customer Portal</a></li>
<li><a href="https://forums.centos.org/viewtopic.php?t=79957">error while trying to activate the new network : - CentOS</a></li>
<li><a href="https://forums.opensuse.org/t/wired-connection-no-more-working-after-system-update/143007/2">Wired connection no more working after system update - English / Network/Internet - openSUSE Forums</a></li>
<li><a href="https://access.redhat.com/solutions/5931421">Why am I seeing the error "Error: Connection activation failed: No suitable device found for this connection (device nic0 not available because device is strictly unmanaged)." - Red Hat Customer Portal</a></li>
<li><a href="https://topic.alibabacloud.com/tc/a/linux-network-commands-ethtool-and-mii-tool-and-nm-tool_1_16_31984405.html">linux 網路命令ethtool與mii-tool及nm-tool</a><ul>
<li><a href="https://access.redhat.com/solutions/1128183">"No link detected" from ethtool and mii-tool - Red Hat Customer Portal</a></li>
</ul>
</li>
<li><a href="https://linux.vbird.org/events/switch_10g_tune.php">鳥哥私房菜 - 使用 10G switch 需要注意的效能問題</a></li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>ip link show
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>sudo mii-tool -v eno7
</span></code></pre></div>
<blockquote>
<p>"LOWER_UP" means the cable is plugged in and has physical link</p>
</blockquote>
<h3 id="no-carrier">NO-CARRIER</h3>
<ul>
<li><a href="http://www.pim0110.idv.tw/joomla/index.php/linux/223-linux">一個關於LINUX網路出問題的解決經驗</a></li>
<li><a href="https://en.wikipedia.org/wiki/NO_CARRIER">NO CARRIER - Wikipedia</a></li>
<li><a href="https://access.redhat.com/solutions/4815731">Why does an interface show NO-CARRIER? - Red Hat Customer Portal</a></li>
</ul>
<blockquote>
<p>Linux's network stack uses the NO CARRIER status for a network interface that is turned on ("up") but cannot be connected because the physical layer is not operating properly, e.g. because an ethernet cable is not plugged in.</p>
</blockquote>
<h3 id="linkdown-from-ip-route">linkdown from ip route</h3>
<ul>
<li><a href="https://unix.stackexchange.com/questions/579087/whats-the-meaning-of-linkdown-and-onlink-in-linux-route">What's the meaning of `linkdown` and `onlink' in Linux Route? - Unix &amp; Linux Stack Exchange</a></li>
</ul>
<h2 id="cisco-nexus-9000-series">Cisco Nexus 9000 Series</h2>
<ul>
<li><a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus9000/sw/7-x/troubleshooting/guide/b_Cisco_Nexus_9000_Series_NX-OS_Troubleshooting_Guide_7x/b_Cisco_Nexus_9000_Series_NX-OS_Troubleshooting_Guide_7x_chapter_010.html">Cisco Nexus 9000 Series NX-OS Troubleshooting Guide, Release 7.x - Overview [Cisco Nexus 9000 Series Switches] - Cisco</a><ul>
<li><a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus9000/sw/7-x/troubleshooting/guide/b_Cisco_Nexus_9000_Series_NX-OS_Troubleshooting_Guide_7x/b_Cisco_Nexus_9000_Series_NX-OS_Troubleshooting_Guide_7x_chapter_0101.html#topic_AFCD799374FF4495B45C0F2FC6A77663">Cisco Nexus 9000 Series NX-OS Troubleshooting Guide, Release 7.x - Troubleshooting Ports [Cisco Nexus 9000 Series Switches] - Cisco</a></li>
</ul>
</li>
</ul>
<h2 id="proxy">Proxy</h2>
<ul>
<li><a href="https://access.redhat.com/solutions/385213">Does Red Hat provide any SOCKS proxy server package? - Red Hat Customer Portal</a></li>
</ul>
<h3 id="squid-system-proxy-config">Squid + System Proxy config</h3>
<ul>
<li><a href="https://blog.yowko.com/squid-proxy/">安裝 Squid Proxy - Yowko's Notes</a></li>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/8/html/deploying_different_types_of_servers/configuring-the-squid-caching-proxy-server_deploying-different-types-of-servers">Chapter 8. Configuring the Squid caching proxy server Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li><a href="https://www.xjimmy.com/squid.html">Squid正向代理服务器的搭建和配置 – Jimmy's Blog</a></li>
</ul>
<p><img alt="" src="https://hackmd.io/_uploads/SyxufPkM6.png" /></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>export http_proxy=&quot;
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>http://10.199.19.1:3128&quot;
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>export https_proxy=&quot;
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>http://10.199.19.1:3128&quot;
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>/etc/squid/conf.d
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>/etc/squid/conf.d/debian.conf
</span></code></pre></div>
<h4 id="apt">apt</h4>
<p>/etc/apt/apt.conf.d/99proxy
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>Acquire::http::Proxy &quot;http://10.199.19.1:3128&quot;;
</span></code></pre></div></p>
<h3 id="ssh-tunnelsocks-proxy-broser-proxy-config">SSH Tunnel(SOCKS Proxy) + Broser Proxy config</h3>
<ul>
<li><a href="https://johnliu55.tw/ssh-tunnel.html">SSH Tunneling (Port Forwarding) 詳解 · John Engineering Stuff</a><ul>
<li><a href="https://www.antoniogioia.com/dynamic-port-forwarding-with-ssh">Dynamic port forwarding with SSH and SOCKS5 - Blog, Antonio Gioia</a></li>
<li><a href="https://datawookie.dev/blog/2023/12/ssh-tunnel-dynamic-port-forwarding/">SSH Tunnel: Dynamic Port Forwarding</a></li>
<li><a href="https://myapollo.com.tw/blog/ssh-socks-proxy-server/">利用遠端 SSH 伺服器架設 SOCKS 代理伺服器(Proxy Server)保護網路傳輸內容 - MyApollo</a></li>
<li><a href="https://linuxize.com/post/how-to-setup-ssh-socks-tunnel-for-private-browsing/">How to Set up SSH SOCKS Tunnel for Private Browsing | Linuxize</a></li>
</ul>
</li>
<li><a href="https://www.redhat.com/sysadmin/ssh-dynamic-port-forwarding">How to set up SSH dynamic port forwarding on Linux | Enable Sysadmin</a></li>
<li><a href="https://iproyal.com/blog/socks-vs-http-proxy/">SOCKS vs HTTP Proxy - Choosing the Right One</a></li>
<li><a href="https://medium.com/@browserscan/http-s-proxy-vs-socks-proxy-whats-the-difference-ff8ad797d1f7">HTTP(s) Proxy vs SOCKS Proxy: What’s the difference | by BrowserScan | Medium</a></li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>ssh -N -D 9090 {user}@{bastion server}
</span></code></pre></div>
<p>run in the background
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>ssh -D 9090 -q -C -N -f {user}@{bastion server}
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a># in linux
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>ps aux | grep &#39;ssh -D&#39;
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>kill {pid}
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a># in windows
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>tasklist | findstr ssh
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>taskkill /F /pid {pid}
</span></code></pre></div></p>
<h4 id="windows-chrome">windows chrome</h4>
<p>命令提示字元
<div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>cd C:\Program Files\Google\Chrome\Application
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>chrome.exe --user-data-dir=&quot;%USERPROFILE%\proxy-profile&quot; --proxy-server=&quot;socks4://localhost:9090&quot;
</span></code></pre></div></p>
<p><img alt="" src="https://hackmd.io/_uploads/BkxdZwkz6.png" /></p>
<h4 id="windows-edge">windows edge</h4>
<p>命令提示字元
<div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>cd &quot;C:\Program Files (x86)\Microsoft\Edge\Application&quot;
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>msedge.exe  --user-data-dir=&quot;%USERPROFILE%\edge-proxy-profile&quot; --proxy-server=&quot;socks4://localhost:9090&quot;
</span></code></pre></div></p>
<h4 id="windows-firefox">windows firefox</h4>
<p><img alt="" src="https://hackmd.io/_uploads/ry88WDJzT.png" /></p>
<h4 id="apt_1">apt</h4>
<ul>
<li><a href="https://gist.github.com/wonderbeyond/3448c2f281062d61716efa1d8083a102">[ubuntu][socks5][proxy] Set proxy for apt · GitHub</a></li>
</ul>
<p>in the machine which in the private subnet and without internet
/etc/apt/apt.conf.d/99proxy
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>Acquire::http::Proxy &quot;socks5h://127.0.0.1:9090&quot;;
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>Acquire::https::Proxy &quot;socks5h://127.0.0.1:9090&quot;;
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>Acquire::socks::proxy &quot;socks5h://127.0.0.1:9090&quot;;
</span></code></pre></div></p>
<h2 id="mtu">MTU</h2>
<ul>
<li><a href="https://www.kawabangga.com/posts/4983">有关 MTU 和 MSS 的一切 | 卡瓦邦噶！</a></li>
<li><a href="https://ubuntuforums.org/showthread.php?t=2475564&amp;p=14098457#post14098457">how to set MTU, now that ifconfig is gone</a></li>
</ul>
<p>After trial and error, I found the MTU config will impact the bandwidth</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>Case 1-1:
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>d23cn001 mtu: 9000
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>d23is168 mtu: 9000
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>d23en007-p38 mtu: 1500
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>d23en007-p39 mtu: 1500
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>r12 d23is168 =&gt; d23en007-p38 =&gt; d23en007-p39 =&gt; r12 d23cn001 Speed Weird 0 byte
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>Case 1-2:
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>d23cn001 mtu: 9000
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>d23is010 mtu: 1500
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>d23en007-p38 mtu: 1500
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>d23en007-p39 mtu: 1500
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>r1 d23is010 =&gt; d23en003-p10 =&gt; d23en007-p39 =&gt; r12 d23cn001 Speed OK
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>
</span><span id="__span-45-18"><a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>
</span><span id="__span-45-19"><a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>Case 1-3:
</span><span id="__span-45-20"><a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a>d23cn001 mtu: 1500
</span><span id="__span-45-21"><a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a>d23is010 mtu: 1500
</span><span id="__span-45-22"><a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a>d23en007-p35 mtu: 1500
</span><span id="__span-45-23"><a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a>d23en007-p37 mtu: 1500
</span><span id="__span-45-24"><a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a>
</span><span id="__span-45-25"><a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a>r12 d23is165 =&gt; d23en007-p35 =&gt; d23en007-p37 =&gt; r12 d23is167 Speed OK
</span><span id="__span-45-26"><a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a>
</span><span id="__span-45-27"><a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a>
</span><span id="__span-45-28"><a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a>Case 2-1:
</span><span id="__span-45-29"><a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a>d23cn001 mtu: 9000
</span><span id="__span-45-30"><a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a>d23is168 mtu: 9000
</span><span id="__span-45-31"><a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a>d23en007-p38 mtu: 9000
</span><span id="__span-45-32"><a id="__codelineno-45-32" name="__codelineno-45-32" href="#__codelineno-45-32"></a>d23en007-p39 mtu: 9000
</span><span id="__span-45-33"><a id="__codelineno-45-33" name="__codelineno-45-33" href="#__codelineno-45-33"></a>
</span><span id="__span-45-34"><a id="__codelineno-45-34" name="__codelineno-45-34" href="#__codelineno-45-34"></a>r12 d23is168 =&gt; d23en007-p38 =&gt; d23en007-p39 =&gt; r12 d23cn001 Speed OK
</span><span id="__span-45-35"><a id="__codelineno-45-35" name="__codelineno-45-35" href="#__codelineno-45-35"></a>
</span><span id="__span-45-36"><a id="__codelineno-45-36" name="__codelineno-45-36" href="#__codelineno-45-36"></a>
</span><span id="__span-45-37"><a id="__codelineno-45-37" name="__codelineno-45-37" href="#__codelineno-45-37"></a>Case 2-2:
</span><span id="__span-45-38"><a id="__codelineno-45-38" name="__codelineno-45-38" href="#__codelineno-45-38"></a>d23cn001 mtu: 9000
</span><span id="__span-45-39"><a id="__codelineno-45-39" name="__codelineno-45-39" href="#__codelineno-45-39"></a>d23is168 mtu: 1500
</span><span id="__span-45-40"><a id="__codelineno-45-40" name="__codelineno-45-40" href="#__codelineno-45-40"></a>d23en007-p38 mtu: 9000
</span><span id="__span-45-41"><a id="__codelineno-45-41" name="__codelineno-45-41" href="#__codelineno-45-41"></a>d23en007-p39 mtu: 9000
</span><span id="__span-45-42"><a id="__codelineno-45-42" name="__codelineno-45-42" href="#__codelineno-45-42"></a>
</span><span id="__span-45-43"><a id="__codelineno-45-43" name="__codelineno-45-43" href="#__codelineno-45-43"></a>r12 d23is168 =&gt; d23en007-p38 =&gt; d23en007-p39 =&gt; r12 d23cn001 Speed OK
</span><span id="__span-45-44"><a id="__codelineno-45-44" name="__codelineno-45-44" href="#__codelineno-45-44"></a>
</span><span id="__span-45-45"><a id="__codelineno-45-45" name="__codelineno-45-45" href="#__codelineno-45-45"></a>
</span><span id="__span-45-46"><a id="__codelineno-45-46" name="__codelineno-45-46" href="#__codelineno-45-46"></a>Case 2-3:
</span><span id="__span-45-47"><a id="__codelineno-45-47" name="__codelineno-45-47" href="#__codelineno-45-47"></a>d23is165 mtu: 1500
</span><span id="__span-45-48"><a id="__codelineno-45-48" name="__codelineno-45-48" href="#__codelineno-45-48"></a>d23is167 mtu: 1500
</span><span id="__span-45-49"><a id="__codelineno-45-49" name="__codelineno-45-49" href="#__codelineno-45-49"></a>d23en007-p35 mtu: 9000
</span><span id="__span-45-50"><a id="__codelineno-45-50" name="__codelineno-45-50" href="#__codelineno-45-50"></a>d23en007-p37 mtu: 9000
</span><span id="__span-45-51"><a id="__codelineno-45-51" name="__codelineno-45-51" href="#__codelineno-45-51"></a>
</span><span id="__span-45-52"><a id="__codelineno-45-52" name="__codelineno-45-52" href="#__codelineno-45-52"></a>r12 d23is165 =&gt; d23en007-p35 =&gt; d23en007-p37 =&gt; r12 d23is167 Speed OK
</span></code></pre></div>
<h2 id="localhost-and-127001">localhost and 127.0.0.1</h2>
<ul>
<li><a href="https://plantegg.github.io/2023/09/24/localhost%E5%92%8C127.0.0.1%E7%9A%84%E5%8C%BA%E5%88%AB/">localhost和127.0.0.1的区别 | plantegg</a></li>
</ul>
<h2 id="can-a-single-network-card-have-2-ip-addresses">Can a single network card have 2 IP addresses</h2>
<ul>
<li><a href="https://serverfault.com/questions/597811/what-happen-when-i-assign-2-ip-on-one-nic">networking - What happen when I assign 2 IP on one NIC? - Server Fault</a></li>
<li><a href="https://serverfault.com/questions/312221/can-a-single-network-card-have-2-ip-addresses">nic - Can a single network card have 2 IP addresses? - Server Fault</a></li>
</ul>
<h2 id="firewall">Firewall</h2>
<ul>
<li><a href="https://linux.vbird.org/linux_server/rocky9/0180firewall.php">鳥哥私房菜 - 第七章、Linux 防火牆設定</a></li>
<li><a href="https://dic.vbird.tw/linux_server/unit04.php">第 4 堂課 - 認識與建置防火牆</a></li>
<li><a href="https://kingtam.win/archives/iptables.html">Linux 的防火牆 (iptables) 初探 - King Zone</a><ul>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6/html/security_guide/sect-security_guide-iptables#sect-Security_Guide-IPTables-Packet_Filtering">2.8.9. IPTables | Red Hat Product Documentation</a></li>
</ul>
</li>
<li><a href="https://iximiuz.com/en/posts/laymans-iptables-101/">Illustrated introduction to Linux iptables</a><ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-list-and-delete-iptables-firewall-rules">How To List and Delete Iptables Firewall Rules | DigitalOcean</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/iptables-essentials-common-firewall-rules-and-commands">Iptables Essentials: Common Firewall Rules and Commands | DigitalOcean</a></li>
<li><a href="https://hackmd.io/@wayne900204/H1MHRakkc/%2F6U3BqCaRTG6WiF35ty97MQ">Linux Firewall - iptables - HackMD</a></li>
<li><a href="https://www.hwchiu.com/iptables-1.html">初探 IPTABLES 流動之路 - 以 Docker 為範例 | Hwchiu Learning Note</a></li>
</ul>
</li>
</ul>
<h2 id="pxe">PXE</h2>
<ul>
<li><a href="https://ithelp.ithome.com.tw/questions/10211073">關於PXE install OS - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>
<li><a href="https://linux.vbird.org/events/pxe_ks_partclone.php">鳥哥私房菜 - 安裝伺服器與 kickstart</a></li>
<li><a href="https://documentation.suse.com/zh-tw/sles/15-SP5/html/SLES-all/cha-deployment-prep-pxe.html">SLES 15 SP5 | 部署指南 | 準備網路開機環境</a></li>
<li><a href="https://documentation.suse.com/zh-tw/sles/15-SP4/html/SLES-all/cha-deployment-prep-uefi-httpboot.html">SLES 15 SP4 | 部署指南 | 設定 UEFI HTTP 開機伺服器</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_an_advanced_rhel_8_installation/preparing-for-a-network-install_installing-rhel-as-an-experienced-user#masthead">Chapter 15. Preparing to install from the network using PXE Red Hat Enterprise Linux 8 | Red Hat Customer Portal</a></li>
<li><a href="https://hackmd.io/@Jason199567/SkrT-zutl">Linux自動運維：使用 PXE &amp; Kickstart 自動安裝 CentOS - HackMD</a></li>
<li><a href="https://chatgpt.com/share/0ebd6e26-678d-4fa2-b228-c5321883bb7b">explain Exsi PXE config</a></li>
</ul>
<p>達成這個 PXE 必須要有兩個環節
- (1)一個是用戶端的網路卡必須要支援 PXE 用戶端功能，並且開機時選擇網路卡開機，這樣系統才會以網路卡進入 PXE 用戶端的程序
- (2)一個是 PXE 伺服器必須要提供至少含有 DHCP 以及 TFTP 的服務才行
    - DHCP 服務必須要能夠提供用戶端的網路參數之外，還得要告知用戶端 TFTP 所在的位置為何才行
    - TFTP 則是提供用戶端 boot loader 及 kernel file 下載點的重要服務</p>
<h2 id="interface-name">Interface name</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Consistent_Network_Device_Naming">Consistent Network Device Naming - Wikipedia</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/ch-consistent_network_device_naming">Chapter 11. Consistent Network Device Naming Red Hat Enterprise Linux 7 | Red Hat Customer Portal</a></li>
<li><a href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/7/html/networking_guide/sec-understanding_the_predictable_network_interface_device_names">11.3. Understanding the Predictable Network Interface Device Names Red Hat Enterprise Linux 7 | Red Hat Customer Portal</a></li>
<li><a href="https://superuser.com/questions/1053003/what-is-the-difference-between-eth1-and-eno1">networking - what is the difference between eth1 and eno1? - Super User</a></li>
<li><a href="https://unix.stackexchange.com/questions/134483/why-is-my-ethernet-interface-called-enp0s10-instead-of-eth0">linux - Why is my ethernet interface called enp0s10 instead of eth0? - Unix &amp; Linux Stack Exchange</a></li>
</ul>
<h2 id="tftp">TFTP</h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>sudo apt-get install tftpd-hpa
</span></code></pre></div>
<p>/etc/default/tftpd-hpa
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a># /etc/default/tftpd-hpa
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>TFTP_USERNAME=&quot;tftp&quot; 
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>TFTP_DIRECTORY=&quot;/tftpboot&quot; 
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>TFTP_ADDRESS=&quot;:69&quot; 
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>TFTP_OPTIONS=&quot;--secure&quot; 
</span></code></pre></div></p>
<h3 id="test-tftp">Test TFTP</h3>
<ul>
<li><a href="https://access.redhat.com/solutions/5590021">TFTP "Transfer timed out" with firewalld - Red Hat Customer Portal</a></li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>[root@foo tmp]# tftp
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>tftp&gt; connect 172.24.131.123
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>tftp&gt; status
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>Connected to 172.24.131.123.
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>Mode: netascii Verbose: off Tracing: off Literal: off
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>Rexmt-interval: 5 seconds, Max-timeout: 25 seconds
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>tftp&gt; get pxelinux.0
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>tftp&gt; q
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>[root@foo tmp]# md5sum pxelinux.0
</span></code></pre></div>
<h2 id="ipxe">iPXE</h2>
<ul>
<li><a href="https://ipxe.org/start">iPXE - open source boot firmware [start]</a><ul>
<li><a href="https://ipxe.org/download">iPXE - open source boot firmware [download]</a></li>
<li><a href="https://ipxe.org/howto/chainloading">iPXE - open source boot firmware [howto:chainloading]</a></li>
<li><a href="https://ipxe.org/howto/dhcpd#pxe_chainloading">iPXE - open source boot firmware [howto:dhcpd]</a></li>
<li><a href="https://ipxe.org/cmd">iPXE - open source boot firmware [cmd]</a></li>
</ul>
</li>
<li><a href="https://medium.com/@peter.bolch/how-to-netboot-with-ipxe-6a41db514dee">How to Netboot with iPXE Part 1. The Basics | by Peter Bolch | Medium</a></li>
<li><a href="https://medium.com/@peter.bolch/how-to-netboot-with-ipxe-6191ed711348">How to Netboot with iPXE Part 2. Booting Alpine | by Peter Bolch | Medium</a></li>
<li><a href="https://rpi4cluster.com/pxe-ipxe/">How to setup iPXE on Ubuntu</a></li>
<li><a href="https://www.clearlinux.org/clear-linux-documentation/get-started/ipxe-install.html">Install Clear Linux OS Over the Network with iPXE — Documentation for Clear Linux* project</a></li>
<li><a href="https://www.ichenfu.com/2021/12/25/server-net-boot-part-2-uefi/">服务器网络启动方式探索Part2：UEFI启动篇 | C0reFast记事本</a></li>
<li><a href="https://docs.vmware.com/tw/VMware-vSphere/7.0/com.vmware.esxi.upgrade.doc/GUID-147D7509-EFB1-4391-973F-48B015B85C83.html">使用 iPXE 和 HTTP 將 ESXi 安裝程式開機</a><ul>
<li><a href="https://docs.vmware.com/tw/VMware-vSphere/7.0/com.vmware.esxi.upgrade.doc/GUID-91E32FD0-A33C-4302-9FAB-B52B8A5CEFBC.html">範例 DHCP 組態</a></li>
</ul>
</li>
<li><a href="https://hub.docker.com/r/linuxserver/netbootxyz">linuxserver/netbootxyz - Docker Image | Docker Hub</a></li>
<li><a href="https://www.reddit.com/r/vmware/comments/187lna5/unable_to_pxe_boot_while_secure_boot_is_enabled/">Unable to PXE boot while Secure Boot is enabled : r/vmware</a></li>
<li>By MAC<ul>
<li><a href="https://forum.ipxe.org/showthread.php?tid=7231">Transfer boot file base on client's MAC</a></li>
<li><a href="https://gist.github.com/robinsmidsrod/2234639">Bootstrapping full iPXE native menu with customizable default option with timeout (also includes working Ubuntu 12.04 preseed install) · GitHub</a></li>
</ul>
</li>
<li>Ubuntu<ul>
<li><a href="https://liujia.anqun.org/index.php/archives/3998/">ubuntu 22.04 - jammy - autoinstall - pxe 自动安装 - 刘家的博客</a><ul>
<li><a href="https://canonical-subiquity.readthedocs-hosted.com/en/latest/howto/autoinstall-quickstart.html">Autoinstall quick start - Ubuntu installation documentation</a></li>
<li><a href="https://www.molnar-peter.hu/en/ubuntu-jammy-netinstall-pxe.html">Molnár Péter's Professional Blog - Ubuntu 22.04 (Jammy) autoinstall over PXE</a></li>
<li><a href="https://hackmd.io/@txLtb1_dT1eziDq4utYbqA/ryUSQD_wu#%E4%B8%80%E5%88%87%E8%B3%87%E6%96%99%E7%9A%84%E8%B5%B7%E9%BB%9E--metadata-">cloud init 介紹 - HackMD</a><ul>
<li><a href="https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html">Autoinstall configuration reference manual - Ubuntu installation documentation</a></li>
</ul>
</li>
<li>offline<ul>
<li><a href="https://askubuntu.com/questions/1488197/autoinstall-ubuntu-22-04-in-air-gapped-network">firefox - Autoinstall Ubuntu 22.04 in Air Gapped network - Ask Ubuntu</a></li>
<li><a href="https://everythingvirtual.ca/install-ubuntu-22-04-offline-with-packer-and-cloud-init/">Install UBUNTU 22.04 offline with PACKER and CLOUD-INIT -</a><ul>
<li><a href="https://cloudinit.readthedocs.io/en/17.1/topics/modules.html">Modules — Cloud-Init 17.1 documentation</a></li>
</ul>
</li>
<li><a href="https://answers.launchpad.net/ubuntu/+source/scala/+question/817737">Question #817737 “Ubuntu22.04/22.10 autoinstall crash” : Questions : scala package : Ubuntu</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://discourse.ubuntu.com/t/ubuntu-22-04-pxe-uefi-netboot-desktop-installation/27841/11">Ubuntu 22.04 PXE / UEFI netboot DESKTOP installation - Ubuntu Community Hub</a></li>
</ul>
</li>
<li>Redhat<ul>
<li><a href="https://www.lisenet.com/2023/configure-pxe-boot-server-for-rocky-linux-9-kickstart-installation/">Configure PXE Boot Server for Rocky Linux 9/CentOS 9 Kickstart Installation | Lisenet.com :: Linux | Security | Networking</a><ul>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/system_design_guide/custom-boot-options_system-design-guide">Appendix F. Boot options reference | Red Hat Product Documentation</a></li>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/installation_guide/chap-anaconda-boot-options#sect-boot-options-installer">Chapter 23. Boot Options | Red Hat Product Documentation</a></li>
<li><a href="https://hackmd.io/@stargazerwang/B18ILmjks">Kickstart File Template for Automating Installation of RHEL 8 - HackMD</a></li>
</ul>
</li>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/system_design_guide/performing_an_automated_installation_using_kickstart#starting-a-kickstart-installation-automatically-using-pxe_starting-kickstart-installations">Chapter 8. Performing an automated installation using Kickstart | Red Hat Product Documentation</a></li>
<li><a href="https://unix.stackexchange.com/questions/678345/pxe-boot-kickstart-how-to-include-installation-tree">rhel - PXE Boot Kickstart - how to include installation tree - Unix &amp; Linux Stack Exchange</a></li>
</ul>
</li>
<li>UEFI Secure Boot<ul>
<li><a href="https://hannan.au/posts/pxe/">iPXE &amp; HTTP(s) Secure Booting | John Hannan's Blog</a></li>
</ul>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>sequenceDiagram
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>    participant TN as target node
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>    participant DHCP
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>    participant TFTP
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>    participant HTTP
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>    TN-&gt;&gt;+DHCP: -
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>    DHCP--&gt;&gt;-TN: next server and get file &quot;ipxe.efi&quot;
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>    TN-&gt;&gt;+TFTP: -
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>    TFTP--&gt;&gt;-TN: network boot firmware: ipxe.efi
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>    TN-&gt;&gt;+DHCP: user-class = &quot;iPXE&quot;
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a>    DHCP--&gt;&gt;-TN: next server and get file &quot;ipxe.script&quot;
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>    TN-&gt;&gt;+TFTP: -
</span><span id="__span-49-14"><a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a>    TFTP--&gt;&gt;-TN: ipxe.script
</span><span id="__span-49-15"><a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a>
</span><span id="__span-49-16"><a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a>    TN-&gt;&gt;+HTTP: get kernel
</span><span id="__span-49-17"><a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a>    HTTP--&gt;&gt;-TN: vmlinuz
</span><span id="__span-49-18"><a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a>    TN-&gt;&gt;+HTTP: get Initrd ramdisk
</span><span id="__span-49-19"><a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a>    HTTP--&gt;&gt;-TN: initrd
</span><span id="__span-49-20"><a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a>    TN-&gt;&gt;+TN: boot with kernel and initrd
</span></code></pre></div>
<h3 id="ubuntu">Ubuntu</h3>
<h4 id="nfs-boot">nfs boot</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>build-essential<span class="w"> </span>debootstrap<span class="w"> </span>isc-dhcp-server<span class="w"> </span>tftpd-hpa<span class="w"> </span>nfs-kernel-server
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="c1"># tftp root path</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tftpboot
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tftpboot/boot
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="c1"># nfs root path</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/srv/nfsroot
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a>sudo<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;/srv/nfsroot *(rw,sync,no_root_squash,no_subtree_check)&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/exports
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>sudo<span class="w"> </span>exportfs<span class="w"> </span>-a
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nfs-kernel-server
</span></code></pre></div>
<p>shared nfs for all nodes
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a># setup the nfs root filesystem
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>sudo debootstrap --arch amd64 jammy /srv/nfsroot http://archive.ubuntu.com/ubuntu/
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a># customize the nfs root filesystem
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>sudo chroot /srv/nfsroot
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>echo &quot;root:$(openssl passwd -6 bar@123)&quot; | chpasswd -e
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>useradd -m -d /home/foo -p $(openssl passwd -6 bar@123) foo
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>apt-get install -y openssh-server
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>exit
</span></code></pre></div></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="c1"># ipxe</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/boot/vmlinuz-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>/tftpboot/vmlinuz
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/boot/initrd.img-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>/tftpboot/initrd.img
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="c1"># sudo chmod 775 /tftpboot/vmlinuz</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>sudo<span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>/tftpboot/ipxe.efi<span class="w"> </span>http://boot.ipxe.org/ipxe.efi
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="c1"># Define the content to append</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="nv">content</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a><span class="s">#!ipxe</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a><span class="s">set http-server 192.168.1.10:8000</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a><span class="s">set nfs-server 192.168.1.10</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a><span class="s">set nfs-root /srv/nfsroot</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a><span class="s">kernel http://${http-server}/vmlinuz initrd=initrd.img root=/dev/nfs rw nfsroot=${nfs-server}:${nfs-root} ip=dhcp</span>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a><span class="s">initrd http://${http-server}/initrd.img</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a><span class="s">boot</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a><span class="s">EOF</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a><span class="k">)</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a>
</span><span id="__span-52-21"><a id="__codelineno-52-21" name="__codelineno-52-21" href="#__codelineno-52-21"></a><span class="c1"># Append the content to the file</span>
</span><span id="__span-52-22"><a id="__codelineno-52-22" name="__codelineno-52-22" href="#__codelineno-52-22"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$content</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/tftpboot/ipxe.script
</span></code></pre></div>
<p>nfs by mac
if mac is 00:0c:29:d5:8a:04
<div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a># setup the nfs root filesystem
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>sudo debootstrap --arch amd64 jammy /srv/nfsroot/000c29d58a04 http://archive.ubuntu.com/ubuntu/
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a># customize the nfs root filesystem
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>sudo chroot /srv/nfsroot/000c29d58a04
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>echo &quot;root:$(openssl passwd -6 bar@123)&quot; | chpasswd -e
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>useradd -m -d /home/foo -p $(openssl passwd -6 bar@123) foo
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a>apt-get install -y openssh-server
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>exit
</span></code></pre></div></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="c1"># ipxe</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/boot/vmlinuz-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>/tftpboot/vmlinuz
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/boot/initrd.img-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>/tftpboot/initrd.img
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="c1"># sudo chmod 775 /tftpboot/vmlinuz</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>sudo<span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>/tftpboot/ipxe.efi<span class="w"> </span>http://boot.ipxe.org/ipxe.efi
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="c1"># Define the content to append</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="nv">content</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="s">#!ipxe</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="s">chain --replace --autofree mac-${mac:hexraw}.ipxe</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="s">EOF</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="k">)</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="c1"># Append the content to the file</span>
</span><span id="__span-54-15"><a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$content</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/tftpboot/ipxe.script
</span><span id="__span-54-16"><a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a>
</span><span id="__span-54-17"><a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a><span class="c1"># Define the content to append</span>
</span><span id="__span-54-18"><a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a><span class="nv">content</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
</span><span id="__span-54-19"><a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a>
</span><span id="__span-54-20"><a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="s">#!ipxe</span>
</span><span id="__span-54-21"><a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a>
</span><span id="__span-54-22"><a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a><span class="s">set http-server 192.168.1.10:8000</span>
</span><span id="__span-54-23"><a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a><span class="s">set nfs-server 192.168.1.10</span>
</span><span id="__span-54-24"><a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a><span class="s">set nfs-root /srv/nfsroot</span>
</span><span id="__span-54-25"><a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a>
</span><span id="__span-54-26"><a id="__codelineno-54-26" name="__codelineno-54-26" href="#__codelineno-54-26"></a><span class="s">kernel http://${http-server}/vmlinuz initrd=initrd.img root=/dev/nfs rw nfsroot=${nfs-server}:${nfs-root}/${mac:hexraw} ip=dhcp</span>
</span><span id="__span-54-27"><a id="__codelineno-54-27" name="__codelineno-54-27" href="#__codelineno-54-27"></a><span class="s">initrd http://${http-server}/initrd.img</span>
</span><span id="__span-54-28"><a id="__codelineno-54-28" name="__codelineno-54-28" href="#__codelineno-54-28"></a><span class="s">boot</span>
</span><span id="__span-54-29"><a id="__codelineno-54-29" name="__codelineno-54-29" href="#__codelineno-54-29"></a><span class="s">EOF</span>
</span><span id="__span-54-30"><a id="__codelineno-54-30" name="__codelineno-54-30" href="#__codelineno-54-30"></a><span class="k">)</span>
</span><span id="__span-54-31"><a id="__codelineno-54-31" name="__codelineno-54-31" href="#__codelineno-54-31"></a>
</span><span id="__span-54-32"><a id="__codelineno-54-32" name="__codelineno-54-32" href="#__codelineno-54-32"></a><span class="c1"># Append the content to the file</span>
</span><span id="__span-54-33"><a id="__codelineno-54-33" name="__codelineno-54-33" href="#__codelineno-54-33"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$content</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/tftpboot/mac-000c29d58a04.ipxe
</span></code></pre></div>
<h4 id="http-autoinstall-provision">http autoinstall provision</h4>
<p>Memory: at least 6GiB</p>
<p>/tftpboot/ipxe.script
format 1
<div class="language-text highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>#!ipxe
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>set http-server 192.168.1.10:8000
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>set nfs-server 192.168.1.10
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>set nfs-root /srv/nfsroot
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>kernel http://${http-server}/ubuntu/jammy/casper/vmlinuz
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>initrd http://${http-server}/ubuntu/jammy/casper/initrd
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>imgargs vmlinuz initrd=initrd \
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a> autoinstall \
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a> ip=dhcp \
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a> url=http://192.168.1.10:8000/ubuntu/jammy/ubuntu-22.04.4-live-server-amd64.iso \
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a> ds=nocloud-net;s=http://192.168.1.10:8000/ubuntu/jammy/autoinstall/
</span><span id="__span-55-13"><a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a>boot
</span></code></pre></div></p>
<p>/tftpboot/ipxe.script
format 2
<div class="language-text highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>#!ipxe
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>set http-server 192.168.1.10:8000
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>set nfs-server 192.168.1.10
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>set nfs-root /srv/nfsroot
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>kernel http://${http-server}/ubuntu/jammy/casper/vmlinuz autoinstall url=http://${http-server}/ubuntu/jammy/ubuntu-22.04.4-live-server-amd64.iso ds=nocloud-net;s=http://${http-server}/ubuntu/jammy/autoinstall/ ip=dhcp
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>initrd http://${http-server}/ubuntu/jammy/casper/initrd
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>boot
</span></code></pre></div></p>
<p>/etc/dhcp/dhcpd.conf
<div class="language-text highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>lease-file-name &quot;/var/lib/dhcp/dhcpd.leases&quot;;
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>option client-architecture code 93 = unsigned integer 16;
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>shared-network ens192 {
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>    subnet 192.168.1.0 netmask 255.255.255.0 {
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a>        max-lease-time 43200;
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>        min-lease-time 43200;
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>        default-lease-time 43200;
</span><span id="__span-57-10"><a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>        range 192.168.1.100 192.168.1.200;
</span><span id="__span-57-11"><a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>        option routers 192.168.1.1;
</span><span id="__span-57-12"><a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>        option subnet-mask 255.255.255.0;
</span><span id="__span-57-13"><a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a>        #option domain-name-servers 8.8.8.8;
</span><span id="__span-57-14"><a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a>        option domain-name &quot;yourdomain.local&quot;;
</span><span id="__span-57-15"><a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a>
</span><span id="__span-57-16"><a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a>        next-server 192.168.1.10;  # IP of your TFTP server
</span><span id="__span-57-17"><a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a>
</span><span id="__span-57-18"><a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>        if exists user-class and option user-class = &quot;iPXE&quot; {
</span><span id="__span-57-19"><a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a>            filename &quot;ipxe.script&quot;;
</span><span id="__span-57-20"><a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a>        } elsif option client-architecture = 00:00 {
</span><span id="__span-57-21"><a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a>            filename &quot;undionly.kpxe&quot;;
</span><span id="__span-57-22"><a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a>        } else {
</span><span id="__span-57-23"><a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a>            filename &quot;ipxe.efi&quot;;
</span><span id="__span-57-24"><a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a>        }
</span><span id="__span-57-25"><a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a>    }
</span><span id="__span-57-26"><a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a>}
</span></code></pre></div></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>wget<span class="w"> </span>-O<span class="w"> </span>/tmp/ubuntu-22.04.4-live-server-amd64.iso<span class="w"> </span>http://172.31.48.191/ISO/ubuntu-22.04.4-live-server-amd64.iso
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/ubuntu-jammy
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>sudo<span class="w"> </span>mount<span class="w"> </span>-o<span class="w"> </span>loop<span class="w"> </span>/tmp/ubuntu-22.04.4-live-server-amd64.iso<span class="w"> </span>/tmp/ubuntu-jammy
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/casper/
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/tmp/ubuntu-jammy/casper/initrd<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/casper/
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/tmp/ubuntu-jammy/casper/vmlinuz<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/casper/
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a>umount<span class="w"> </span>/tmp/ubuntu-jammy
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/tmp/ubuntu-22.04.4-live-server-amd64.iso<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/autoinstall
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a>sudo<span class="w"> </span>touch<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/autoinstall/meta-data
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="c1"># disable_suites is for offline env</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a>sudo<span class="w"> </span>cat<span class="w"> </span>&gt;<span class="w"> </span>/tftpboot/boot/ubuntu/jammy/autoinstall/user-data<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39;</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="s">#cloud-config</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="s">autoinstall:</span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="s">  identity:</span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="s">    hostname: ipxe-target-from-http</span>
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="s">    password: $6$Br4k9eeV7CUn4yAh$XUSXOInFLjkgndlC.S9kdsS6LhOUoIhWprDSa.VKhvprmjSdMienG4b.4n5r3NrD.auc3SEjbseOn3td/FnYS/</span>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="s">    username: foo</span>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="s">  version: 1</span>
</span><span id="__span-58-20"><a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="s">  apt:</span>
</span><span id="__span-58-21"><a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="s">    disable_suites: [updates, backports, security, proposed, release, inversion, multiverse]</span>
</span><span id="__span-58-22"><a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="s">  user-data:</span>
</span><span id="__span-58-23"><a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="s">    users:</span>
</span><span id="__span-58-24"><a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="s">      - name: foo</span>
</span><span id="__span-58-25"><a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a><span class="s">        gecos: &#39;foo User&#39;</span>
</span><span id="__span-58-26"><a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a><span class="s">        sudo: ALL=(ALL) NOPASSWD:ALL</span>
</span><span id="__span-58-27"><a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a><span class="s">EOF</span>
</span><span id="__span-58-28"><a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a>
</span><span id="__span-58-29"><a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a>sudo<span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>/tftpboot/ipxe.efi<span class="w"> </span>http://boot.ipxe.org/ipxe.efi
</span><span id="__span-58-30"><a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a>
</span><span id="__span-58-31"><a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a><span class="c1"># Define the content to append</span>
</span><span id="__span-58-32"><a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a>sudo<span class="w"> </span>cat<span class="w"> </span>&gt;<span class="w"> </span>/tftpboot/ipxe.script<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39;</span>
</span><span id="__span-58-33"><a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a>
</span><span id="__span-58-34"><a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a><span class="s">#!ipxe</span>
</span><span id="__span-58-35"><a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a>
</span><span id="__span-58-36"><a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a><span class="s">set http-server 192.168.1.10:8000</span>
</span><span id="__span-58-37"><a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a><span class="s">set nfs-server 192.168.1.10</span>
</span><span id="__span-58-38"><a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a>
</span><span id="__span-58-39"><a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a><span class="s">kernel http://${http-server}/ubuntu/jammy/casper/vmlinuz autoinstall url=http://${http-server}/ubuntu/jammy/ubuntu-22.04.4-live-server-amd64.iso ds=nocloud-net;s=http://${http-server}/ubuntu/jammy/autoinstall/ ip=dhcp</span>
</span><span id="__span-58-40"><a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a><span class="s">initrd http://${http-server}/ubuntu/jammy/casper/initrd</span>
</span><span id="__span-58-41"><a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a><span class="s">boot</span>
</span><span id="__span-58-42"><a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a><span class="s">EOF</span>
</span></code></pre></div>
<p>if need to enable <strong>root account ssh login by password</strong>, use this user-data
<div class="language-text highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>#cloud-config
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>autoinstall:
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>  identity:
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>    hostname: ipxe-target-from-http
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>    password: $6$Br4k9eeV7CUn4yAh$XUSXOInFLjkgndlC.S9kdsS6LhOUoIhWprDSa.VKhvprmjSdMienG4b.4n5r3NrD.auc3SEjbseOn3td/FnYS/
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>    username: foo
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>  version: 1
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a>  apt:
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a>    disable_suites: [updates, backports, security, proposed, release, inversion, multiverse]
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>  user-data:
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a>    users:
</span><span id="__span-59-12"><a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a>      - name: foo
</span><span id="__span-59-13"><a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a>        gecos: &#39;foo User&#39;
</span><span id="__span-59-14"><a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a>        sudo: ALL=(ALL) NOPASSWD:ALL
</span><span id="__span-59-15"><a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a>    chpasswd:
</span><span id="__span-59-16"><a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a>      list: |
</span><span id="__span-59-17"><a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a>        root:$6$Br4k9eeV7CUn4yAh$XUSXOInFLjkgndlC.S9kdsS6LhOUoIhWprDSa.VKhvprmjSdMienG4b.4n5r3NrD.auc3SEjbseOn3td/FnYS/
</span><span id="__span-59-18"><a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a>      expire: false
</span><span id="__span-59-19"><a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a>    ssh_pwauth: true
</span><span id="__span-59-20"><a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a>    write_files:
</span><span id="__span-59-21"><a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a>      - path: /etc/ssh/sshd_config.d/customized.conf
</span><span id="__span-59-22"><a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a>        content: |
</span><span id="__span-59-23"><a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a>          PermitRootLogin yes
</span><span id="__span-59-24"><a id="__codelineno-59-24" name="__codelineno-59-24" href="#__codelineno-59-24"></a>          PasswordAuthentication yes
</span><span id="__span-59-25"><a id="__codelineno-59-25" name="__codelineno-59-25" href="#__codelineno-59-25"></a>    runcmd:
</span><span id="__span-59-26"><a id="__codelineno-59-26" name="__codelineno-59-26" href="#__codelineno-59-26"></a>      - systemctl restart sshd
</span></code></pre></div></p>
<h3 id="redhat">Redhat</h3>
<h4 id="http-autoinstall-provision_1">http autoinstall provision</h4>
<p>/tftpboot/ipxe.script
<div class="language-text highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>#!ipxe
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>set http-server 192.168.1.10:8000
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>kernel http://${http-server}/boot/rhel/8.9/raw/images/pxeboot/vmlinuz initrd=initramfs inst.stage2=http://${http-server}/boot/rhel/8.9/raw inst.ks=http://${http-server}/boot/rhel/8.9/raw/ks.cfg
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>initrd --name initramfs http://${http-server}/boot/rhel/8.9/raw/images/pxeboot/initrd.img
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a>boot
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>mount -t iso9660 /tmp/rhel-8.9-x86_64-dvd.iso /tmp/rhel-8.9 -o loop,ro
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>mkdir -p /home/foo/boot/rhel/8.9/raw
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>rsync -avzh --progress /tmp/rhel-8.9/ /home/foo/boot/rhel/8.9/raw/
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>touch /home/foo/boot/rhel/8.9/raw/ks.cfg
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>cat &gt; /home/foo/boot/rhel/8.9/raw/ks.cfg &lt;&lt; &#39;EOF&#39;
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>#version=RHEL8
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>text
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>repo --name=&quot;AppStream&quot; --baseurl=http://192.168.1.10:8000/boot/rhel/8.9/raw/AppStream
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a>%packages
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a>@^minimal-environment
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a>kexec-tools
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a>
</span><span id="__span-61-15"><a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a>%end
</span><span id="__span-61-16"><a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a>
</span><span id="__span-61-17"><a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a># Keyboard layouts
</span><span id="__span-61-18"><a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a>keyboard --xlayouts=&#39;us&#39;
</span><span id="__span-61-19"><a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a># System language
</span><span id="__span-61-20"><a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a>lang en_US.UTF-8
</span><span id="__span-61-21"><a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a>
</span><span id="__span-61-22"><a id="__codelineno-61-22" name="__codelineno-61-22" href="#__codelineno-61-22"></a># Network information
</span><span id="__span-61-23"><a id="__codelineno-61-23" name="__codelineno-61-23" href="#__codelineno-61-23"></a>network  --bootproto=dhcp --device=ens160 --ipv6=auto --activate
</span><span id="__span-61-24"><a id="__codelineno-61-24" name="__codelineno-61-24" href="#__codelineno-61-24"></a>network  --hostname=ipxe-target-from-http.localdomain
</span><span id="__span-61-25"><a id="__codelineno-61-25" name="__codelineno-61-25" href="#__codelineno-61-25"></a>
</span><span id="__span-61-26"><a id="__codelineno-61-26" name="__codelineno-61-26" href="#__codelineno-61-26"></a># Use network installation
</span><span id="__span-61-27"><a id="__codelineno-61-27" name="__codelineno-61-27" href="#__codelineno-61-27"></a>url --url=&quot;http://192.168.1.10:8000/boot/rhel/8.9/raw&quot;
</span><span id="__span-61-28"><a id="__codelineno-61-28" name="__codelineno-61-28" href="#__codelineno-61-28"></a>
</span><span id="__span-61-29"><a id="__codelineno-61-29" name="__codelineno-61-29" href="#__codelineno-61-29"></a># Run the Setup Agent on first boot
</span><span id="__span-61-30"><a id="__codelineno-61-30" name="__codelineno-61-30" href="#__codelineno-61-30"></a>firstboot --enable
</span><span id="__span-61-31"><a id="__codelineno-61-31" name="__codelineno-61-31" href="#__codelineno-61-31"></a>
</span><span id="__span-61-32"><a id="__codelineno-61-32" name="__codelineno-61-32" href="#__codelineno-61-32"></a>ignoredisk --only-use=sda
</span><span id="__span-61-33"><a id="__codelineno-61-33" name="__codelineno-61-33" href="#__codelineno-61-33"></a>autopart
</span><span id="__span-61-34"><a id="__codelineno-61-34" name="__codelineno-61-34" href="#__codelineno-61-34"></a># Partition clearing information
</span><span id="__span-61-35"><a id="__codelineno-61-35" name="__codelineno-61-35" href="#__codelineno-61-35"></a>clearpart --all --initlabel
</span><span id="__span-61-36"><a id="__codelineno-61-36" name="__codelineno-61-36" href="#__codelineno-61-36"></a>
</span><span id="__span-61-37"><a id="__codelineno-61-37" name="__codelineno-61-37" href="#__codelineno-61-37"></a># System timezone
</span><span id="__span-61-38"><a id="__codelineno-61-38" name="__codelineno-61-38" href="#__codelineno-61-38"></a>timezone America/New_York --isUtc
</span><span id="__span-61-39"><a id="__codelineno-61-39" name="__codelineno-61-39" href="#__codelineno-61-39"></a>
</span><span id="__span-61-40"><a id="__codelineno-61-40" name="__codelineno-61-40" href="#__codelineno-61-40"></a># Root password
</span><span id="__span-61-41"><a id="__codelineno-61-41" name="__codelineno-61-41" href="#__codelineno-61-41"></a>rootpw --iscrypted $6$nhMYeGx62dqF2l7O$pxNdZ6urW0mvCoMAh8.PhUFtbssl3LopiRCa7iMk.4n/qGcyKgDR2jMhhlcTHNPSJm73qEzeamQXfv.WyEEbb/
</span><span id="__span-61-42"><a id="__codelineno-61-42" name="__codelineno-61-42" href="#__codelineno-61-42"></a>user --groups=wheel --name=foo --password=$6$M6xOA4EgUKJtHEUK$czJSOAjKfE1zbvZlB2CVOSRkmnRxCc52bPALWIJpk.aOaHAPT6ZvYWa4ZZaZTa0Q1o0ORf1Wf1yyR2OWkeCbY0 --iscrypted --gecos=&quot;foo&quot;
</span><span id="__span-61-43"><a id="__codelineno-61-43" name="__codelineno-61-43" href="#__codelineno-61-43"></a>
</span><span id="__span-61-44"><a id="__codelineno-61-44" name="__codelineno-61-44" href="#__codelineno-61-44"></a>%addon com_redhat_kdump --enable --reserve-mb=&#39;auto&#39;
</span><span id="__span-61-45"><a id="__codelineno-61-45" name="__codelineno-61-45" href="#__codelineno-61-45"></a>
</span><span id="__span-61-46"><a id="__codelineno-61-46" name="__codelineno-61-46" href="#__codelineno-61-46"></a>%end
</span><span id="__span-61-47"><a id="__codelineno-61-47" name="__codelineno-61-47" href="#__codelineno-61-47"></a>
</span><span id="__span-61-48"><a id="__codelineno-61-48" name="__codelineno-61-48" href="#__codelineno-61-48"></a>reboot
</span><span id="__span-61-49"><a id="__codelineno-61-49" name="__codelineno-61-49" href="#__codelineno-61-49"></a>EOF
</span></code></pre></div>
<p>ks.cfg for autopart
<div class="language-text highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>#version=RHEL8
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>text
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>repo --name=&quot;AppStream&quot; --baseurl=http://192.168.1.10:8000/boot/rhel/8.9/raw/AppStream
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>%packages
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a>@^minimal-environment
</span><span id="__span-62-8"><a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a>kexec-tools
</span><span id="__span-62-9"><a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a>
</span><span id="__span-62-10"><a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a>%end
</span><span id="__span-62-11"><a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a>
</span><span id="__span-62-12"><a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a># Keyboard layouts
</span><span id="__span-62-13"><a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a>keyboard --xlayouts=&#39;us&#39;
</span><span id="__span-62-14"><a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a># System language
</span><span id="__span-62-15"><a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a>lang en_US.UTF-8
</span><span id="__span-62-16"><a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a>
</span><span id="__span-62-17"><a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a># Network information
</span><span id="__span-62-18"><a id="__codelineno-62-18" name="__codelineno-62-18" href="#__codelineno-62-18"></a>network  --bootproto=dhcp --device=ens160 --ipv6=auto --activate
</span><span id="__span-62-19"><a id="__codelineno-62-19" name="__codelineno-62-19" href="#__codelineno-62-19"></a>network  --hostname=ipxe-target-from-http.localdomain
</span><span id="__span-62-20"><a id="__codelineno-62-20" name="__codelineno-62-20" href="#__codelineno-62-20"></a>
</span><span id="__span-62-21"><a id="__codelineno-62-21" name="__codelineno-62-21" href="#__codelineno-62-21"></a># Use network installation
</span><span id="__span-62-22"><a id="__codelineno-62-22" name="__codelineno-62-22" href="#__codelineno-62-22"></a>url --url=&quot;http://192.168.1.10:8000/boot/rhel/8.9/raw&quot;
</span><span id="__span-62-23"><a id="__codelineno-62-23" name="__codelineno-62-23" href="#__codelineno-62-23"></a>
</span><span id="__span-62-24"><a id="__codelineno-62-24" name="__codelineno-62-24" href="#__codelineno-62-24"></a># Run the Setup Agent on first boot
</span><span id="__span-62-25"><a id="__codelineno-62-25" name="__codelineno-62-25" href="#__codelineno-62-25"></a>firstboot --enable
</span><span id="__span-62-26"><a id="__codelineno-62-26" name="__codelineno-62-26" href="#__codelineno-62-26"></a>
</span><span id="__span-62-27"><a id="__codelineno-62-27" name="__codelineno-62-27" href="#__codelineno-62-27"></a>ignoredisk --only-use=sda
</span><span id="__span-62-28"><a id="__codelineno-62-28" name="__codelineno-62-28" href="#__codelineno-62-28"></a>autopart
</span><span id="__span-62-29"><a id="__codelineno-62-29" name="__codelineno-62-29" href="#__codelineno-62-29"></a># Partition clearing information
</span><span id="__span-62-30"><a id="__codelineno-62-30" name="__codelineno-62-30" href="#__codelineno-62-30"></a>clearpart --all --initlabel
</span><span id="__span-62-31"><a id="__codelineno-62-31" name="__codelineno-62-31" href="#__codelineno-62-31"></a>
</span><span id="__span-62-32"><a id="__codelineno-62-32" name="__codelineno-62-32" href="#__codelineno-62-32"></a># System timezone
</span><span id="__span-62-33"><a id="__codelineno-62-33" name="__codelineno-62-33" href="#__codelineno-62-33"></a>timezone America/New_York --isUtc
</span><span id="__span-62-34"><a id="__codelineno-62-34" name="__codelineno-62-34" href="#__codelineno-62-34"></a>
</span><span id="__span-62-35"><a id="__codelineno-62-35" name="__codelineno-62-35" href="#__codelineno-62-35"></a># Root password
</span><span id="__span-62-36"><a id="__codelineno-62-36" name="__codelineno-62-36" href="#__codelineno-62-36"></a>rootpw --iscrypted $6$nhMYeGx62dqF2l7O$pxNdZ6urW0mvCoMAh8.PhUFtbssl3LopiRCa7iMk.4n/qGcyKgDR2jMhhlcTHNPSJm73qEzeamQXfv.WyEEbb/
</span><span id="__span-62-37"><a id="__codelineno-62-37" name="__codelineno-62-37" href="#__codelineno-62-37"></a>user --groups=wheel --name=foo --password=$6$M6xOA4EgUKJtHEUK$czJSOAjKfE1zbvZlB2CVOSRkmnRxCc52bPALWIJpk.aOaHAPT6ZvYWa4ZZaZTa0Q1o0ORf1Wf1yyR2OWkeCbY0 --iscrypted --gecos=&quot;foo&quot;
</span><span id="__span-62-38"><a id="__codelineno-62-38" name="__codelineno-62-38" href="#__codelineno-62-38"></a>
</span><span id="__span-62-39"><a id="__codelineno-62-39" name="__codelineno-62-39" href="#__codelineno-62-39"></a>%addon com_redhat_kdump --enable --reserve-mb=&#39;auto&#39;
</span><span id="__span-62-40"><a id="__codelineno-62-40" name="__codelineno-62-40" href="#__codelineno-62-40"></a>
</span><span id="__span-62-41"><a id="__codelineno-62-41" name="__codelineno-62-41" href="#__codelineno-62-41"></a>%end
</span><span id="__span-62-42"><a id="__codelineno-62-42" name="__codelineno-62-42" href="#__codelineno-62-42"></a>
</span><span id="__span-62-43"><a id="__codelineno-62-43" name="__codelineno-62-43" href="#__codelineno-62-43"></a>reboot
</span></code></pre></div></p>
<p>ks.cfg for customized partition(80G)
<div class="language-text highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>#version=RHEL9
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>text
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>repo --name=&quot;AppStream&quot; --baseurl=http://192.168.1.10:8000/boot/rhel/9.3/raw/AppStream
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>%packages
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>@^minimal-environment
</span><span id="__span-63-8"><a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a>rsync
</span><span id="__span-63-9"><a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a>kexec-tools
</span><span id="__span-63-10"><a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>
</span><span id="__span-63-11"><a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a>%end
</span><span id="__span-63-12"><a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a>
</span><span id="__span-63-13"><a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a># Keyboard layouts
</span><span id="__span-63-14"><a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a>keyboard --xlayouts=&#39;us&#39;
</span><span id="__span-63-15"><a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a># System language
</span><span id="__span-63-16"><a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a>lang en_US.UTF-8
</span><span id="__span-63-17"><a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a>
</span><span id="__span-63-18"><a id="__codelineno-63-18" name="__codelineno-63-18" href="#__codelineno-63-18"></a># Network information
</span><span id="__span-63-19"><a id="__codelineno-63-19" name="__codelineno-63-19" href="#__codelineno-63-19"></a>network  --bootproto=dhcp --device=ens160 --ipv6=auto --activate
</span><span id="__span-63-20"><a id="__codelineno-63-20" name="__codelineno-63-20" href="#__codelineno-63-20"></a>network  --hostname=ipxe-target-from-http.localdomain
</span><span id="__span-63-21"><a id="__codelineno-63-21" name="__codelineno-63-21" href="#__codelineno-63-21"></a>
</span><span id="__span-63-22"><a id="__codelineno-63-22" name="__codelineno-63-22" href="#__codelineno-63-22"></a># Use network installation
</span><span id="__span-63-23"><a id="__codelineno-63-23" name="__codelineno-63-23" href="#__codelineno-63-23"></a>url --url=&quot;http://192.168.1.10:8000/boot/rhel/9.3/raw&quot;
</span><span id="__span-63-24"><a id="__codelineno-63-24" name="__codelineno-63-24" href="#__codelineno-63-24"></a>
</span><span id="__span-63-25"><a id="__codelineno-63-25" name="__codelineno-63-25" href="#__codelineno-63-25"></a># Run the Setup Agent on first boot
</span><span id="__span-63-26"><a id="__codelineno-63-26" name="__codelineno-63-26" href="#__codelineno-63-26"></a>firstboot --enable
</span><span id="__span-63-27"><a id="__codelineno-63-27" name="__codelineno-63-27" href="#__codelineno-63-27"></a>
</span><span id="__span-63-28"><a id="__codelineno-63-28" name="__codelineno-63-28" href="#__codelineno-63-28"></a>ignoredisk --only-use=sda
</span><span id="__span-63-29"><a id="__codelineno-63-29" name="__codelineno-63-29" href="#__codelineno-63-29"></a># Disk partitioning information
</span><span id="__span-63-30"><a id="__codelineno-63-30" name="__codelineno-63-30" href="#__codelineno-63-30"></a>part /boot/efi --fstype=efi --size=600
</span><span id="__span-63-31"><a id="__codelineno-63-31" name="__codelineno-63-31" href="#__codelineno-63-31"></a>part /boot --fstype=xfs --size=1024
</span><span id="__span-63-32"><a id="__codelineno-63-32" name="__codelineno-63-32" href="#__codelineno-63-32"></a>part pv.01 --size=1 --grow
</span><span id="__span-63-33"><a id="__codelineno-63-33" name="__codelineno-63-33" href="#__codelineno-63-33"></a>
</span><span id="__span-63-34"><a id="__codelineno-63-34" name="__codelineno-63-34" href="#__codelineno-63-34"></a>volgroup vg_root pv.01
</span><span id="__span-63-35"><a id="__codelineno-63-35" name="__codelineno-63-35" href="#__codelineno-63-35"></a>logvol / --vgname=vg_root --size=10240 --grow --name=lv_root --fstype=xfs
</span><span id="__span-63-36"><a id="__codelineno-63-36" name="__codelineno-63-36" href="#__codelineno-63-36"></a>logvol /home --vgname=vg_root --size=10240 --name=lv_home --fstype=xfs
</span><span id="__span-63-37"><a id="__codelineno-63-37" name="__codelineno-63-37" href="#__codelineno-63-37"></a>logvol /tmp --vgname=vg_root --size=30720 --name=lv_tmp --fstype=xfs
</span><span id="__span-63-38"><a id="__codelineno-63-38" name="__codelineno-63-38" href="#__codelineno-63-38"></a>logvol swap --vgname=vg_root --size=2048 --name=lv_swap --fstype=swap
</span><span id="__span-63-39"><a id="__codelineno-63-39" name="__codelineno-63-39" href="#__codelineno-63-39"></a>
</span><span id="__span-63-40"><a id="__codelineno-63-40" name="__codelineno-63-40" href="#__codelineno-63-40"></a># Partition clearing information
</span><span id="__span-63-41"><a id="__codelineno-63-41" name="__codelineno-63-41" href="#__codelineno-63-41"></a>clearpart --all --initlabel
</span><span id="__span-63-42"><a id="__codelineno-63-42" name="__codelineno-63-42" href="#__codelineno-63-42"></a>
</span><span id="__span-63-43"><a id="__codelineno-63-43" name="__codelineno-63-43" href="#__codelineno-63-43"></a># System timezone
</span><span id="__span-63-44"><a id="__codelineno-63-44" name="__codelineno-63-44" href="#__codelineno-63-44"></a>timezone America/New_York --isUtc
</span><span id="__span-63-45"><a id="__codelineno-63-45" name="__codelineno-63-45" href="#__codelineno-63-45"></a>
</span><span id="__span-63-46"><a id="__codelineno-63-46" name="__codelineno-63-46" href="#__codelineno-63-46"></a># Root password
</span><span id="__span-63-47"><a id="__codelineno-63-47" name="__codelineno-63-47" href="#__codelineno-63-47"></a>rootpw --iscrypted $6$nhMYeGx62dqF2l7O$pxNdZ6urW0mvCoMAh8.PhUFtbssl3LopiRCa7iMk.4n/qGcyKgDR2jMhhlcTHNPSJm73qEzeamQXfv.WyEEbb/
</span><span id="__span-63-48"><a id="__codelineno-63-48" name="__codelineno-63-48" href="#__codelineno-63-48"></a>user --groups=wheel --name=foo --password=$6$M6xOA4EgUKJtHEUK$czJSOAjKfE1zbvZlB2CVOSRkmnRxCc52bPALWIJpk.aOaHAPT6ZvYWa4ZZaZTa0Q1o0ORf1Wf1yyR2OWkeCbY0 --iscrypted --gecos=&quot;foo&quot;
</span><span id="__span-63-49"><a id="__codelineno-63-49" name="__codelineno-63-49" href="#__codelineno-63-49"></a>
</span><span id="__span-63-50"><a id="__codelineno-63-50" name="__codelineno-63-50" href="#__codelineno-63-50"></a>%addon com_redhat_kdump --enable --reserve-mb=&#39;auto&#39;
</span><span id="__span-63-51"><a id="__codelineno-63-51" name="__codelineno-63-51" href="#__codelineno-63-51"></a>
</span><span id="__span-63-52"><a id="__codelineno-63-52" name="__codelineno-63-52" href="#__codelineno-63-52"></a>%end
</span><span id="__span-63-53"><a id="__codelineno-63-53" name="__codelineno-63-53" href="#__codelineno-63-53"></a>
</span><span id="__span-63-54"><a id="__codelineno-63-54" name="__codelineno-63-54" href="#__codelineno-63-54"></a>reboot
</span></code></pre></div></p>
<h3 id="ipxe-menu">ipxe menu</h3>
<p>combine http autoinstall provision for ubuntu and redhat</p>
<p>/tftpboot/ipxe-menu.script
<div class="language-text highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>#!ipxe
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a># Set a timeout for the menu 20s
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>set menu-timeout 20000
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a># Set http server access point
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>set http-server 192.168.1.10:8000
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a># Define the menu
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>:start
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>menu iPXE Boot Menu
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>item --key u ubuntu22 Autoinstall provision for Ubuntu 22
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>item --key r rhel93 Autoinstall provision for Redhat 9.3
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a>item --gap -- --------------------------
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a>item --key x exit Exit iPXE
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a># Choose the default menu item
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a>choose --default ubuntu22 --timeout ${menu-timeout} selected
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a>goto ${selected}
</span><span id="__span-64-20"><a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a>
</span><span id="__span-64-21"><a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a>:ubuntu22
</span><span id="__span-64-22"><a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a>echo Autoinstall provision for Ubuntu 22...
</span><span id="__span-64-23"><a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a>kernel http://${http-server}/boot/ubuntu/jammy/casper/vmlinuz autoinstall url=http://${http-server}/boot/ubuntu/jammy/ubuntu-22.04.4-live-server-amd64.iso ds=nocloud-net;s=http://${http-server}/boot/ubuntu/jammy/autoinstall/ ip=dhcp
</span><span id="__span-64-24"><a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a>initrd http://${http-server}/boot/ubuntu/jammy/casper/initrd
</span><span id="__span-64-25"><a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a>boot
</span><span id="__span-64-26"><a id="__codelineno-64-26" name="__codelineno-64-26" href="#__codelineno-64-26"></a>
</span><span id="__span-64-27"><a id="__codelineno-64-27" name="__codelineno-64-27" href="#__codelineno-64-27"></a>:rhel93
</span><span id="__span-64-28"><a id="__codelineno-64-28" name="__codelineno-64-28" href="#__codelineno-64-28"></a>echo Autoinstall provision for Redhat 9.3...
</span><span id="__span-64-29"><a id="__codelineno-64-29" name="__codelineno-64-29" href="#__codelineno-64-29"></a>kernel http://${http-server}/boot/rhel/9.3/pxeboot/vmlinuz initrd=initramfs inst.stage2=http://${http-server}/boot/rhel/9.3/raw inst.ks=http://${http-server}/boot/rhel/9.3/raw/ks.cfg
</span><span id="__span-64-30"><a id="__codelineno-64-30" name="__codelineno-64-30" href="#__codelineno-64-30"></a>initrd --name initramfs http://${http-server}/boot/rhel/9.3/pxeboot/initrd.img
</span><span id="__span-64-31"><a id="__codelineno-64-31" name="__codelineno-64-31" href="#__codelineno-64-31"></a>boot
</span><span id="__span-64-32"><a id="__codelineno-64-32" name="__codelineno-64-32" href="#__codelineno-64-32"></a>
</span><span id="__span-64-33"><a id="__codelineno-64-33" name="__codelineno-64-33" href="#__codelineno-64-33"></a>:exit
</span><span id="__span-64-34"><a id="__codelineno-64-34" name="__codelineno-64-34" href="#__codelineno-64-34"></a>echo Exiting iPXE...
</span></code></pre></div></p>
<h2 id="cloudflare-tunnel">Cloudflare Tunnel</h2>
<ul>
<li><a href="https://ivonblog.com/posts/cloudflare-tunnel/">Cloudflare Tunnel教學，從外網安全地存取內網的Linux伺服器 · Ivon的部落格</a></li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../Ansys/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Ansys">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Ansys
              </div>
            </div>
          </a>
        
        
          
          <a href="../Deployment/" class="md-footer__link md-footer__link--next" aria-label="Next: Deployment">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Deployment
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.path", "search.highlight", "search.share", "navigation.footer", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>